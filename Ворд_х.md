|     |     |     |
|-----|-----|-----|
|     |     |     |

**Система зберігання та збору даних**

**реєстраторів розрахункових операцій**

**Протокол передачі інформації.**

> Версія 2.1.7
>
> 0
>
> *Файл:* *СЗЗД РРО. Протокол передачі інформації_2\_1_7.doc  
> Версія 2.1.7,* *Редакція 1.x від* *27.11.19*

**Реєстр змін специфікації**

<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 19%" />
<col style="width: 9%" />
<col style="width: 45%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>No</strong></td>
<td><strong>Дата</strong></td>
<td><strong>Версія</strong></td>
<td><strong>Опис</strong></td>
<td><strong>Виконав</strong></td>
</tr>
<tr class="even">
<td><ol type="1">
<li></li>
</ol></td>
<td>16.10.2012</td>
<td>1.0</td>
<td>Базова версія документу</td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="2" type="1">
<li></li>
</ol></td>
<td>26.04.2013</td>
<td>2.0</td>
<td>Версія документу з урахуванням досвіду</td>
<td></td>
</tr>
<tr class="even">
<td><ol start="3" type="1">
<li></li>
</ol></td>
<td>28.01.2015</td>
<td>2.1</td>
<td>Врахування змін законодавства (доданий TXAL=2)</td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="4" type="1">
<li></li>
</ol></td>
<td>16.04.2015</td>
<td>2.1.1</td>
<td>Врахування змішаного чеку</td>
<td></td>
</tr>
<tr class="even">
<td><ol start="5" type="1">
<li></li>
</ol></td>
<td>14.03.2016</td>
<td>2.1.2</td>
<td>Врахування чеку переказу коштів</td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="6" type="1">
<li></li>
</ol></td>
<td>04.04.2016</td>
<td>2.1.3</td>
<td>Розширення формату пакетів даних РРО з купівлі-продажу іноземної валюти</td>
<td></td>
</tr>
<tr class="even">
<td><ol start="7" type="1">
<li></li>
</ol></td>
<td>04.04.2016</td>
<td>2.1.5</td>
<td>Врахування змін законодавства (доданий TXAL=3)</td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="8" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td>Додавання атрибутів тегу TXS з урахуванням податку в РРО з купівлі та продажу іноземної валюти</td>
<td></td>
</tr>
<tr class="even">
<td><ol start="9" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td>Додавання атрибутів операцій сторно</td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="10" type="1">
<li></li>
</ol></td>
<td></td>
<td>2.1.6</td>
<td>Уточнення тегів &lt;Z&gt; та &lt;VL&gt; Z-звіту РРО з купівлі-продажу іноземної валюти</td>
<td>О. Ващенко</td>
</tr>
<tr class="even">
<td><ol start="11" type="1">
<li></li>
</ol></td>
<td></td>
<td>2.1.6</td>
<td>Уточнення атрибутів тегу &lt;P&gt; при здійснені переказів коштів у РРО ПТКС.</td>
<td>О. Ващенко</td>
</tr>
<tr class="odd">
<td><ol start="12" type="1">
<li></li>
</ol></td>
<td>17.08.2019</td>
<td>2.1.7</td>
<td>Додано операцію з видачи готівки держателям електронних платіжних засобів.</td>
<td>О. Ващенко</td>
</tr>
</tbody>
</table>

**Зміст**

1\. Призначення [4](#призначення)

2\. Персоналізація [4](#персоналізація)

3\. Регламент передачі інформації [5](#регламент-передачі-інформації)

4\. Підтвердження передачі інформації
[5](#підтвердження-передачі-інформації)

5\. Формат обміну даними [6](#формат-обміну-даними)

5.1. Формат повідомлення від РРО [6](#формат-повідомлення-від-рро)

5.2. Формат повідомлення від серверу
[7](#формат-повідомлення-від-серверу)

6\. Формат повідомлення персоналізації
[9](#формат-повідомлення-персоналізації)

7\. Формат повідомлення передачі контрольно-звітної інформації
[9](#формат-повідомлення-передачі-контрольно-звітної-інформації)

7.1. Формат пакетів даних чеків [9](#формат-пакетів-даних-чеків)

7.1.2. Формат пакетів даних чеків РРО загального призначення
[10](#формат-пакетів-даних-чеків-рро-загального-призначення)

7.1.3. Приклади пакетів даних чеків РРО загального призначення
[15](#приклади-пакетів-даних-чеків-рро-загального-призначення)

7.1.4. Формат пакетів даних чеків спеціалізованих РРО
[17](#формат-пакетів-даних-чеків-спеціалізованих-рро)

7.2. Формат пакету даних Z-звіту [17](#формат-пакету-даних-z-звіту)

7.2.1. Формат пакету даних Z-звіту РРО загального призначення
[18](#формат-пакету-даних-z-звіту-рро-загального-призначення)

7.2.2. Приклади пакету даних Z-звіту РРО загального призначення
[20](#приклади-пакету-даних-z-звіту-рро-загального-призначення)

7.2.3. Формат пакету даних Z-звіту спеціалізованих РРО
[20](#формат-пакету-даних-z-звіту-спеціалізованих-рро)

8\. Забезпечення унікальності ідентифікації розрахункового документа
[21](#забезпечення-унікальності-ідентифікації-розрахункового-документа)

Додаток А [22](#_Toc20216479)

1\. Алгоритм приведення пакету даних до канонічного вигляду
[22](#алгоритм-приведення-пакету-даних-до-канонічного-вигляду)

Додаток Б1 [24](#додаток-б1)

1\. Формат пакетів даних РРО для АЗС
[24](#формат-пакетів-даних-рро-для-азс)

2\. Приклади [28](#приклади)

Додаток Б2 [29](#додаток-б2)

1\. Формат пакетів даних РРО з купівлі-продажу іноземної валюти
[29](#формат-пакетів-даних-рро-з-купівлі-продажу-іноземної-валюти)

2\. Приклад [31](#приклад)

Додаток Б3 [35](#додаток-б3)

1\. Формат пакетів даних РРО електронних таксометрів
[35](#формат-пакетів-даних-рро-електронних-таксометрів)

2\. Приклади [37](#приклади-1)

Додаток Г. Приклад оформлення акцизу на продаж товарів
[38](#додаток-г.-приклад-оформлення-акцизу-на-продаж-товарів)

Додаток Д. Приклад оформлення акцизу на продаж алкоголя та
нафтопродуктів
[39](#додаток-д.-приклад-оформлення-акцизу-на-продаж-алкоголя-та-нафтопродуктів)

Додаток Е. Приклад оформлення переведення коштів за допомогою ПТКС
[40](#додаток-е.-приклад-оформлення-переведення-коштів-за-допомогою-пткс)

Додаток Є. Приклад оформлення переведення коштів в РРО
[40](#додаток-є.-приклад-оформлення-переведення-коштів-в-рро)

Додаток Ж. Приклад оформлення видачі готівкових коштів держателям
електронних платіжних засобів.
[41](#додаток-ж.-приклад-оформлення-видачі-готівкових-коштів-держателям-електронних-платіжних-засобів.)

Додаток В. Коди помилок отримання пакетів даних
[42](#додаток-в.-коди-помилок-отримання-пакетів-даних)

# Призначення

У даному документі визначається структура пакетів даних РРО для обміну з
сервером обробки інформації, інтерфейси взаємодії компонентів, процес
персоналізації РРО тощо.

У разі внесення необхідних змін документ може доповнюватись окремими
додатками.

# Персоналізація

Персоналізація необхідна для однозначного визначення РРО в системі
сервером обробки інформації за допомогою системи унікальних номерів, до
якої входять: фіскальний номер, унікальний номер РРО (для РРО з КСЕФ)
або унікальний номер модему (для РРО, що друкують контрольну стрічку)
(ID DEV\*), індивідуальний заводській номер РРО, унікальний номер МБ SAM
(ID SAM\*) та інше.

Персоналізація виконується одночасно з фіскалізацією (перереєстрацією)
РРО або після неї. Проведення операцій реєстрації у фіскальному режими
до проведення персоналізації повинне бути заборонене.

Персоналізація проводиться сервісним інженером і потребує підключення
РРО до каналу зв’язку за допомогою вбудованого або зовнішнього модему.

Для персоналізації використовується синхронний тип сесій (\*) взаємодії
РРО – сервер.

При виконанні персоналізації необхідно сформувати і надіслати на сервер
команду «повідомлення персоналізації» (формат представлений в даному
документі) та отримати підтвердження (формат представлений в даному
документі).

Після отримання позитивного підтвердження необхідно завершити
персоналізацію та надрукувати повідомлення про успішне завершення
персоналізації, а також дату, час, свій фіскальний номер, унікальній
номер (ID DEV\*) та індивідуальний заводській номер РРО.

У разі негативного підтвердження (з кодом помилки) або відсутності
підтвердження необхідно вжити заходів по усуненню проблеми і повторити
процедуру персоналізації. У цьому випадку так само повинно друкувати
повідомлення про результат персоналізації.

***ПРИМІТКА.*** Порядок використання понять, що позначені (\*),
викладений у документі \[1\].

Рекомендований формат повідомлення персоналізації, що повинно
друкуватися РРО:

<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>ПЕРСОНАЛIЗАЦIЯ ВИКОНАНА</p>
<p>ФН 0000000000</p>
<p>ID DEV хх00000000</p>
<p>ЗН хх00000000</p>
<p>01-09-2012 12:00</p></td>
<td></td>
</tr>
</tbody>
</table>

або

<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>ПОМИЛКА ПЕРСОНАЛIЗАЦIЇ</p>
<p>ХХХ</p>
<p>ФН 0000000000</p>
<p>ID DEV хх00000000</p>
<p>ЗН хх00000000</p>
<p>01-09-2012 12:00</p></td>
<td>Код або опис помилки</td>
</tr>
</tbody>
</table>

# Регламент передачі інформації

Інформація, що передбачена у «Порядку передачі електронних копій
розрахункових документів і фіскальних звітних чеків реєстраторів
розрахункових операцій дротовими або бездротовими каналами зв'язку до
органів державної податкової служби», у разі здійснення розрахункових
операцій повинна передаватися із заданою сервером обробки інформації
періодичністю але не менше одного разу за 72 години.

# Підтвердження передачі інформації

Рекомендований формат повідомлення про підтвердження передачі
інформації, що повинно друкуватися РРО при друку контрольної стрічки
(РРО, що друкують контрольну стрічку, крім електронних
контрольно-касових реєстраторів, та РРО для реєстрації операцій з
купівлі-продажу іноземної валюти).

<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>Z-звiт Дата/час</strong></p>
<p>0005-1013 29.09.2012</p>
<p>Передано 15:55</p></td>
<td><blockquote>
<p>Назва (жирним шрифтом)</p>
<p>Номера Z-звітів та дата підтвердження</p>
<p>Час отримання інформації транспортним сервером (інформаційним еквайром)</p>
</blockquote></td>
</tr>
</tbody>
</table>

<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>Z-звiт Дата/час</strong></p>
<p>0001-0005 27.09.2012</p>
<p>Отримано 17:35</p></td>
<td><blockquote>
<p>Назва (жирним шрифтом)</p>
<p>Номера Z-звітів та дата підтвердження</p>
<p>Час отримання інформації кінцевим адресатом (сервером ДПС)</p>
</blockquote></td>
</tr>
</tbody>
</table>

Рекомендований формат повідомлення про підтвердження передачі
інформації, що повинно заноситися до та/або друкуватися на контрольної
стрічки (РРО, що створюють контрольну стрічку в електронній формі, та
електронні контрольно-касові реєстратори).

<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>ПАКЕТ Дата/час</strong></p>
<p>0000000005-0000001013</p>
<p>Передано 29.09.2012 15:55</p></td>
<td><blockquote>
<p>Назва (жирним шрифтом)</p>
<p>Номера підтверджених пакетів даних</p>
<p>Час та дата отримання інформації транспортним сервером (інформаційним еквайром)</p>
</blockquote></td>
</tr>
</tbody>
</table>

<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p><strong>ПАКЕТ Дата/час</strong></p>
<p>0000000001-0000000005</p>
<p>Отримано 27.09.2012 17:35</p></td>
<td><blockquote>
<p>Назва (жирним шрифтом)</p>
<p>Номера підтверджених пакетів даних</p>
<p>Час та дата отримання інформації кінцевим адресатом (сервером ДПС)</p>
</blockquote></td>
</tr>
</tbody>
</table>

# Формат обміну даними

Обмін даними ініціюється РРО або модемом і здійснюється шляхом обміну
XML повідомленнями між РРО або модемом та сервером. Сервер не може
ініціювати сеанс зв’язку з РРО або модемом.

Структура XML повідомлення від РРО або модему:

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

{зміст повідомлення}

\</RQ>

Атрибути тегу \<RQ>

|       |                             |         |
|-------|-----------------------------|---------|
| Назва | Коментар                    | Формат  |
| V     | Версія формату повідомлення | Decimal |

Структура XML відповіді від сервера:

\<?xml version="1.0" encoding="windows-1251"?>

\<RS V="1">

{зміст повідомлення}

\</RS>

Атрибути тегу \<RS>

|       |                          |         |
|-------|--------------------------|---------|
| Назва | Коментар                 | Формат  |
| V     | Версія формату відповіді | Decimal |

Повідомлення від РРО або модему та відповіді на них не прив’язані до
однієї сесії зв’язку. Передача відповіді на повідомлення може
здійснюватись через деякий час при надходженні наступного повідомлення
від РРО або модему. Сервер може відправляти одну відповідь на одне або
декілька повідомлень, отриманих раніше. На повідомлення, що вимагають
негайної відповіді, відповідь відправляється в межах цієї ж сесії
зв’язку.

## Формат повідомлення від РРО

Всі повідомлення від РРО містять пакет даних та значення MAC у
наступному вигляді:

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT FN="4538765845" TN=”ПН 345612052809” ZN="АА57506761" DI="238"
DT="0" V="1">

{зміст пакету даних}

\<TS>20110801112601\</TS>

\</DAT>

\<MAC DI="238" NT="34">

{значення MAC}

\</MAC>

\<DAT …>…\</DAT>

\<MAC …>…\</MAC>

...

\<DAT …>…\</DAT>

\<MAC …>…\</MAC>

\</RQ>

В повідомленні може бути одна або декілька пар пакетів даних та значень
MAC.

Пакет даних міститься всередині тегу \<DAT>, який завжди зберігається і
передається в канонічному вигляді (див. Додаток А). Атрибути тегу \<DAT>
повідомлення від РРО:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 42%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>FN</td>
<td>Фіскальний номер РРО</td>
<td>String</td>
</tr>
<tr class="odd">
<td>TN</td>
<td>Податковий номер або Індивідуальний номер платника ПДВ</td>
<td>String</td>
</tr>
<tr class="even">
<td>ZN</td>
<td>Заводський номер РРО</td>
<td>String</td>
</tr>
<tr class="odd">
<td>DI</td>
<td>Ідентифікатор пакету даних (має бути унікальним в межах кожного РРО)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>DT</td>
<td><p>Тип РРО.</p>
<p>Може не вказуватись при DT=”0”.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – РРО загального призначення;</p>
<p>1 – РРО для АЗС;</p>
<p>2 – РРО таксометри;</p>
<p>3 – РРО з купівлі-продажу іноземної валюти;</p>
<p>4 – РРО таксометр;</p>
<p>5 – РРО «Експрес»;</p>
<p>6 – РРО з продажу жетонів метро;</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>V</td>
<td>Версія формату пакету даних</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

Тег \<DAT> завжди містить підтег \<TS>, який містить дату та час
формування пакету даних в форматі YYYYMMDDhhmmss, де:

> YYYY – рік формування пакету даних
>
> MM – місяць
>
> DD – число
>
> hh – години
>
> mm – хвилини
>
> ss – секунди

Для РРО, які друкують контрольну стрічку, тег \<TS> містить дату та час
формування даних, на основі яких модем сформував пакет даних для
відправки.

Тег \<MAC> містить в собі значення MAC відповідного пакету даних,
попередньо перетворений в формат Base64. MAC обчислюється для тегу
\<DAT> з усім його вмістом.

Формат тегу:

|       |                                                                                    |         |
|-------|------------------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                           | Формат  |
| DI    | Ідентифікатор пакету даних, для якого був обчислений MAC                           | Decimal |
| NT    | Порядковий номер MAC; має бути унікальним і постійно зростаючим в межах одного РРО | Decimal |

Типи повідомлень РРО:

-   персоналізація

-   передача звітної інформації

Опис форматів повідомлень наведено далі в документі.

## Формат повідомлення від серверу

Повідомлення від серверу до РРО передаються у наступному вигляді:

\<?xml version="1.0" encoding="windows-1251"?>

\<RS V="1">

\<DAT>

\<CNF TY=”C” FR=”1” TO=”237” ER=”0” TS=”20110801112601”/>

\<CNF TY=”C” FR=”238” TO=”238” ER=”1” ERM=”Пакет даних не коректний”
TS=”20110801115609”/>

\<CNF TY=”C” FR=”239” TO=”1000” ER=”0” TS=”20110801122315”/>

\<CNF TY=”Z” FR=”5” TO=”10” ER=”0” TS=”20110801125559”/>

...

\<CNF …/>

\<CFG TY=”C” MD=”0” FR=”100” TO=”200”/>

\<CFG PRT=”120”/>

\<CFG MSG=”ОПЛАТІТЬ ПОДАТОК ЗА 2010 РІК” PRM=”30”/>

...

\<CFG …/>

\</DAT>

\</RS>

Тег \<DAT> не має атрибутів. У повідомленні можуть міститись жодного,
один або декілька підтверджень отримання сервером пакетів даних від РРО
(тег \<CNF>), а також жодної, одна або декілька вказівок настройки
режиму обміну з сервером та роботи РРО (тег \<CFG>).

Атрибути тегу \<CNF>:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 34%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>TY</td>
<td>Тип документу, якого стосуються підтвердження</td>
<td><p>String</p>
<blockquote>
<p>С – всі пакети даних, включаючи Z-звіти *</p>
<p>Z – Z-звіти</p>
<p>P – пакети персоналізації</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>FR</td>
<td>Початковий номер пакету даних або Z-звіту діапазону, що підтверджується</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TO</td>
<td>Кінцевий номер пакету даних або Z-звіту діапазону, що підтверджується</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>ER</td>
<td>Код помилки, що виникла при отримані або обробці пакетів даних</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – немає помилки</p>
<p>100-399 – помилка <sup>*</sup></p>
</blockquote></td>
</tr>
<tr class="even">
<td>ERM</td>
<td><p>Описання помилки, що виникла при отримані або обробці пакетів даних.</p>
<p>Не обов’язків атрибут.</p></td>
<td>String</td>
</tr>
<tr class="odd">
<td>TS</td>
<td>Дата та час обробки сервером пакетів даних</td>
<td><p>String</p>
<blockquote>
<p>YYYYMMDDhhmmss</p>
</blockquote></td>
</tr>
</tbody>
</table>

\* Допускається підтвердження всіх пакетів даних, включаючи Z-звіти (при
TY=”C”), або окреме підтвердження чеків (при TY=”C”) та окреме
підтвердження Z-звітів (при TY=“Z”).

\*\* Опис кодів помилок:

-   100-199 – повторити передачу (до п’яти разів)

-   200-299 – повторна передача не потрібна

-   300-399 – критична помилка, потрібне втручання спеціаліста

Детальний перелік помилок наведений в Додатку В.

Атрибути тегу \<CFG>:

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 56%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>TY <sup>*</sup></td>
<td>Тип документу, якого стосуються команди</td>
<td><p>String</p>
<blockquote>
<p>С – всі пакети даних</p>
<p>Z – Z-звіти</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>FR</td>
<td>Початковий номер пакету даних або Z-звіту діапазону, який потрібно передати.</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TO</td>
<td>Кінцевий номер пакету даних або Z-звіту діапазону, який потрібно передати. При TO=”” або відсутності атрибута передаватись буде діапазон від FR до останнього пакету даних.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>MD</td>
<td>Спосіб передачі</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – невідкладно</p>
<p>1 – періодично (згідно атрибуту PRT)</p>
</blockquote></td>
</tr>
<tr class="even">
<td>PRT</td>
<td>Період при періодичній передачі у хвилинах.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>MSG<sup>**</sup></td>
<td>Текстове повідомлення, яке буде друкуватись на принтері РРО</td>
<td>String</td>
</tr>
<tr class="even">
<td>PRM<sup>**</sup></td>
<td>Періодичність друку текстового повідомлення (через вказану кількість чеків)</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

<sup>\*</sup> При відсутності або пустому значені атрибуту TY, атрибути
FR, TO та MD ігноруються.

<sup>\*\*</sup>Повідомлення повинно відображатись на чеках РРО протягом
не менше 24 годин

# Формат повідомлення персоналізації 

Під час фіскалізації або наступних перереєстрацій РРО або модем формує
пакет даних персоналізації , який має наступний формат:

\<DAT FN="4538765845" TN=”ПН 345612052809” ZN="АА57506761" DI="129"
DT=”0” V="1">

\<BEG ID_SAM=”MTIzNA==” ID_DEV=”YWJjZA==”/>

\<TS>20110801112601\</TS>

\</DAT>

\<MAC DI="129" NT="4">

{значення MAC}

\</MAC>

Атрибути тегу \<BEG>

|        |                                       |        |
|--------|---------------------------------------|--------|
| Назва  | Коментар                              | Формат |
| ID_SAM | Значення ID_SAM, перетворене в Base64 | String |
| ID_DEV | Значення ID_DEV, перетворене в Base64 | String |

Пакет даних персоналізації передається в межах синхронної сесії
взаємодії. Успішним завершенням проведення операції є отримання
відповіді від серверу з підтвердженням отримання пакету даних зі
значенням атрибуту ER=”0”.

\<?xml version="1.0" encoding="windows-1251"?>

\<RS V="1">

\<DAT>

\<CNF TY=”P” FR=”129” TO=”129” ER=”0” TS=”20110801112601”/>

\</DAT>

\</RS>

7.  # Формат повідомлення передачі контрольно-звітної інформації

    1.  ## Формат пакетів даних чеків

Загальний вигляд пакету даних чеку наступний:

\<DAT FN="1234567890" TN=”ПН 345612052809” ZN="АА57506761" DI="238"
DT=”0” V="1">

\<C T="0">

{зміст чеку}

\</C>

\<TS>20110801112601\</TS>

\</DAT>

\<MAC DI="238" NT="1234567890">

{значення MAC}

\</MAC>

## Формат пакетів даних чеків РРО загального призначення

Чек розміщується всередині тегу \<C>. Атрибути тегу:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 24%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>Т</td>
<td>Тип чеку</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – чек продажу;</p>
<p>1 – чек повернення;</p>
<p>2 – службовий чек внесення коштів;</p>
<p>3 – службовий чек приймання пального;</p>
<p>4 – чек переказу коштів;</p>
<p>5 – чек операції обміну валюти;</p>
<p>6 – чек-довідка про підбиття підсумків операції обміну валюти;</p>
<p>7 - чек виплати готівки;</p>
</blockquote></td>
</tr>
</tbody>
</table>

Чек може вміщувати такі теги:

-   \<P> – продаж

-   \<CP> – відмова від продажу

-   \<D> – знижка

-   \<S> – націнка

-   \<M> – оплата

-   \<I> – службове внесення

-   \<O> – службова видача

-   \<L> – текстовий коментар

-   \<H> – службова інформація

-   \<VD> – відміна операції

-   \<E> – закриття (закінчення) чеку

-   \<PTKS>-реквізити ПТКС

> Допускається наявність інших тегів в тегу \<C> та \<Z>, а також інших
> атрибутів у всіх зазначених тегах , не описаних в даному документі.
> При цьому додані теги/атрибути повинні мати наступний формат: ХХХ_YYY,
> де ХХХ – назва підприємсва, що додала тег/атрібут(3 символи), YYY –
> назва тегу/атрібуту. Додані теги/атрибути повинні складатись виключно
> з літер латинської абетки.
>
> В описі атрибутів при зазначенні цін, сум, тощо значення вказується в
> грн. з точністю два десяткових знака, помножене на 100. Приклад: ціна
> 12,34 грн вказується як 1234.
>
> При зазначенні кількості значення вказується з точністю три десяткових
> знака, помножене на 1000. Приклад: кількість 1 шт вказується як 1000.
> Кількість 12,345 кг вказується як 12345.
>
> Атрибути тегу \<P> (продаж)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Код товару</td>
<td>String</td>
</tr>
<tr class="even">
<td>CD</td>
<td>Штрихкод (необов’язковий атрибут для РРО, які не підтримують роботу з штрихкодами).</td>
<td>String</td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Назва товару, послуги, або операції</td>
<td>String</td>
</tr>
<tr class="even">
<td>SM</td>
<td>Сума операції.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>Q</td>
<td>Кількість (може не вказуватись при Q=”1000”).</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>PRC</td>
<td>Ціна товару (може не вказуватись при Q=”1000”, або у чеку переказу коштів).</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>OA</td>
<td>Назва отримувача, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="even">
<td>OB</td>
<td>Код отримувача, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="odd">
<td>OC</td>
<td>Код банку отримувача, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="even">
<td>OD</td>
<td>Найменування банку одержувача, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="odd">
<td>OE</td>
<td>Номер рахунку в банку одержувача, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="even">
<td>OG</td>
<td>Реквізити платіжного засобу одержувача, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="odd">
<td>OH</td>
<td>Призначення платежу (одержувача)</td>
<td>String</td>
</tr>
<tr class="even">
<td>OI</td>
<td>Найменування платника, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="odd">
<td>OJ</td>
<td>Ідентифікаційний код платника, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="even">
<td>OK</td>
<td>Реквізити платіжного засобу платника, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="odd">
<td>OL</td>
<td>Підстава платежу платником, якщо присутній.</td>
<td>String</td>
</tr>
<tr class="even">
<td>ТX</td>
<td>Позначення податку, яким обкладається товар.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткуввання)</p>
<p>-1 – не є об’єктом оподаткуання</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>RT</td>
<td>Тип виплати; вказується тільки для чеку повернення (може не вказуватись при RT=”0”)</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – повернення товару або рекомпенсація послуги (для РРО, в яких рекомпенсація виконується через повернення товару)</p>
<p>1 – рекомпенсація послуги</p>
<p>2 – прийняття цінностей під заставу</p>
<p>3– виплата виграшу</p>
</blockquote></td>
</tr>
</tbody>
</table>

> Атрибути тегу \<CP> (відмова від продажу)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Код товару</td>
<td>String</td>
</tr>
<tr class="even">
<td>CD</td>
<td>Штрихкод (необов’язковий атрибут для РРО, які не підтримують роботу з штрихкодами)</td>
<td>String</td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Назва товару</td>
<td>String</td>
</tr>
<tr class="even">
<td>SM</td>
<td>Сума операції</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>Q</td>
<td>Кількість (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>PRC</td>
<td>Ціна товару (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>ТX</td>
<td>Позначення податку, яким обкладається товар.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
</tbody>
</table>

> Атрибути тегів \<D>/\<S> (знижка/націнка)

<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 57%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TR</td>
<td>Тип застосування</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – попередній продаж,</p>
<p>1 – проміжний підсумок,</p>
<p>2 – спеціальна</p>
</blockquote></td>
</tr>
<tr class="even">
<td>TY</td>
<td>Тип</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – сумова</p>
<p>1 – відсоткова</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>ST</td>
<td>Проміжна сума чеку, на яку нараховується знижка/націнка (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>NI</td>
<td>Порядковий номер операції, до якої відноситься знижка/націнка. Присутній, якщо знижка/націнка стосується лише однієї операції.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TX</td>
<td>Податок, якщо знижка стосується лише одного податку</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
<tr class="even">
<td>PR</td>
<td>Відсоток знижки, для відсоткових знижок (не вказується при TY=”0”)</td>
<td><p>Decimal</p>
<blockquote>
<p>00.00-99.99</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Загальна сума знижки</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>DN</td>
<td><p>Номер підтвердження пільгової знижки.</p>
<p>Отримується від серверу пільгових знижок. Вказується при використані соціальної знижки.</p></td>
<td>String</td>
</tr>
</tbody>
</table>

> У разі, якщо знижка/націнка стосується товарів із різним
> оподаткуванням, тег знижки/націнки повинен включати теги \<TX> з
> атрибутом TX, значення якого відповідає параметрам відповідного
> податку.
>
> У разі, якщо знижка/націнка стосується декількох операцій, тег
> знижки/націнки повинен включати теги \<NI> з атрибутом NI, значення
> якого відповідає порядковому номеру операції, для якої застосовується
> знижка/націнка (при TR=”1”). Якщо знижка нараховується на групу
> товарів, для яких уже нараховувалась знижка, то в переліку операцій
> вказуються операції продажу товарів і операція нарахування попередньої
> знижки.
>
> Атрибути тегів \<I>/\<O> (службове внесення/службова видача)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>T</td>
<td>Формат оплати.</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – готівкою</p>
<p>не 0 – безготівкові форми оплати</p>
</blockquote></td>
</tr>
<tr class="even">
<td>NM</td>
<td>Назва оплати (може не вказуватись).</td>
<td>String</td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Сума оплати.</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

> Атрибути тегу \<M> (оплата)

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 57%" />
<col style="width: 32%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>T</td>
<td>Форма оплати.</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – готівкою</p>
<p>не 0 – безготівкові форми оплати</p>
</blockquote></td>
</tr>
<tr class="even">
<td>NM</td>
<td>Назва оплати (може не вказуватись).</td>
<td>String</td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Сума оплати (сума, що вноситься покупцем).</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>RM</td>
<td>Решта (не вказується, якщо решта відсутня).</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>RRN</td>
<td><p>Ідентифікатор трансакції, що надається еквайром та ідентифікує операцію в платіжній системі.</p>
<p>Вказується тільки для РРО з КСЕФ для безготівкових типів оплати у разі застосування при оплаті ПЗПС, PIN-паду або платіжного терміналу.</p></td>
<td>String</td>
</tr>
<tr class="even">
<td>PSNM</td>
<td>Назва платіжної системи</td>
<td>String</td>
</tr>
</tbody>
</table>

> Тег \<L> (текстовий коментар) призначений до зберігання текстових
> коментарів. Атрибути тегу \<L>

|       |                                  |         |
|-------|----------------------------------|---------|
| Назва | Коментар                         | Формат  |
| N     | Порядковий номер операції в чеку | Decimal |

> Тег \<H> (службова інформація) призначений до зберігання службової
> інформації, яка додається до КСЕФ, але не друкується на чеках.
> Інформація зберігається в форматі Base64. Атрибути тегу \<H>

|       |                                  |         |
|-------|----------------------------------|---------|
| Назва | Коментар                         | Формат  |
| N     | Порядковий номер операції в чеку | Decimal |

> Атрибути тегу \<VD> (відміна операції)

|       |                                                                                                     |         |
|-------|-----------------------------------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                                            | Формат  |
| N     | Порядковий номер операції в чеку.                                                                   | Decimal |
| NI    | Порядковий номер операції, яка відміняється. Присутній, якщо відміна стосується лише одного товару. | Decimal |

> У разі, якщо відміна стосується декількох операцій, тег відміни
> повинен включати теги \<NI> з атрибутом NI, значення якого відповідає
> порядковому номеру операції, яка відміняється.
>
> Атрибути тегу \<E> (закриття чеку)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 52%" />
<col style="width: 38%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>NO</td>
<td>Номер фіскального чеку</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>SM</td>
<td>Загальна сума чеку</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>SE</td>
<td>Сума чеку без урахування ПДВ та додаткових зборів (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>FN</td>
<td>Фіскальний номер РРО</td>
<td>String</td>
</tr>
<tr class="odd">
<td>TS</td>
<td>Дата та час формування чеку</td>
<td><p>String</p>
<blockquote>
<p>YYYYMMDDhhmmss</p>
</blockquote></td>
</tr>
<tr class="even">
<td>ТX, або TXR</td>
<td><p>Позначення податку, яким обкладаються товари. У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p>
<p>Позначення податку, яким обкладаються товари у секції повернення змішаного чека</p></td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TXPR</td>
<td><p>Ставка податку у відсотках.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TXSM</td>
<td><p>Сума податку.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>DTPR</td>
<td><p>Ставка додаткового збору у відсотках.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>DTSM</td>
<td><p>Сума додаткового збору.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TXTY</td>
<td><p>Ознака податку не включеного в вартість.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – включено в вартість</p>
<p>1 – не включено в вартість</p>
<p>2 – прибутковий</p>
</blockquote></td>
</tr>
<tr class="even">
<td>TXAL</td>
<td><p>Алгоритм обчислення податку (в випадку TXAL="0" атрибут може не вказуватись).</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – ПДВ начисляється на ціну товару без урахування додаткового збору</p>
<p>1 – ПДВ начисляється на ціну товару з урахування додаткового збору</p>
<p>2 – додатковий збір начисляється на ціну товару з урахуванням ПДВ;</p>
<p>3 – акцизний податок нараховуйтеся на кількість товару.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>CS</td>
<td>Номер касира, котрий закінчив чек (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>VD</td>
<td>Відміна всього чеку (може не вказуватись при VD="0"). При VD="1" всі атрибути, окрім N і VD, можуть бути відсутніми.</td>
<td><p>Decimal</p>
<blockquote>
<p>1 – чек відмінено</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>PA</td>
<td>Ідентифікатор єквайера торговця</td>
<td>String</td>
</tr>
<tr class="even">
<td>PB</td>
<td>Ідентифікатор платіжного пристрою</td>
<td>String</td>
</tr>
<tr class="odd">
<td>PC</td>
<td>Тип операції</td>
<td>String</td>
</tr>
<tr class="even">
<td>PD</td>
<td>Реквізити ЕПЗ</td>
<td>String</td>
</tr>
<tr class="odd">
<td>PE</td>
<td>Код авторизації</td>
<td>String</td>
</tr>
<tr class="even">
<td>PF</td>
<td>Сума комісії</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

> У разі, якщо в чеку продавались товари з декількома податковими
> групами, тег закриття чеку повинен включати теги \<TX> з атрибутами
> TX, TXPR, TXSM, DTPR, DTSM, TXTY і TXAL, значення яких відповідають
> параметрам відповідного податку. Для податкової ставки Без ПДВ та не є
> обєктом оподаткування, всі атрибути, що мають нульове значення, окрім
> TX можуть не вказуватись.
>
> Для пакетів даних, не пов’язаних із продажем/поверненням товарів
> (службові чеки), можуть вказуватись лише атрибути N і VD.

Атрибути тегу \<PTKS> (реквізити ПТКС)

|       |                                         |         |
|-------|-----------------------------------------|---------|
| Назва | Коментар                                | Формат  |
| N     | Порядковий номер операції в чеку        | Decimal |
| PNR   | Номер ПТКС                              | String  |
| PT    | Адреса розміщення ПТКС                  | String  |
| PU    | Номер операції ПТКС                     | String  |
| PV    | Система оператора ПТКС                  | String  |
| PW    | Номер операції у системі оператора ПТКС | String  |

## Приклади пакетів даних чеків РРО загального призначення

Чек продажу.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">

\<C T="0">  
\<L N="1">КАСИР 1\</L>

\<H N=”2”>z8XQ2MjJINfFyiDHzLLNyA==\</H>  
\<P N="3" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>  
\<D N="4" TR="0" TY="0" NI="2" TX="1" SM="50"/>  
\<M N="5" T="0" NM="ГОТІВКА" SM="750" M="1000" RM="250"/>

\<E N="6" NO="19" SM="750" SE="625" FN="4538765845" TS="20110801112601"
TX="1" TXPR="20.00" TXSM="125" DTPR="0.00" DTSM="0" TXTY="0" TXAL="0"
CS="1"/>  
\</C>

\<TS>20110801112601\</TS>

\</DAT>

> Чек продажу товарів з декількома податками

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">  
\<C T="0">  
\<P N="1" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>  
\<P N="2" C="0760557812999" NM="ВОДА МІНЕРАЛЬНА" SM="100" TX="2"/>  
\<M N="3" T="0" NM="КАРТКА" SM="900" RRN="238945678222"/>

\<E N="4" NO="19" SM="900" SE="745" FN="4538765845" TS="20110801112601"
CS="1">

\<TX TX="1" TXPR="20.00" TXSM="133" DTPR="0.00" DTSM="0" TXTY="0"
TXAL="0"/>

\<TX TX="2" TXPR="20.00" TXSM="16" DTPR="7.50" DTSM="6" TXTY="0"
TXAL="0"/>

\</E>  
\</C>  
\<TS>20110801112601\</TS>

\</DAT>

> Знижка на декілька податків.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">  
\<C T="0">  
\<P N="1" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>  
\<P N="2" C="0760557812999" NM="ВОДА МІНЕРАЛЬНА" SM="100" TX="2"/>  
\<D N="3" TR="1" TY="1" PR="10.00" SM="90">

\<NI NI="1"/>

\<NI NI="2"/>  
\<TX TX="1"/>

\<TX TX="2"/>  
\</D>  
\<M N="4" T="0" NM="ГОТІВКА" SM="810"/>

\<E N="5" NO="19" SM="810" SE="671" FN="4538765845" TS="20110801112601"
CS="1">

\<TX TX="1" TXPR="20.00" TXSM="120" DTPR="0.00" DTSM="0" TXTY="0"
TXAL="0"/>

\<TX TX="2" TXPR="20.00" TXSM="14" DTPR="7.50" DTSM="5" TXTY="0"
TXAL="0"/>

\</E>  
\</C>  
\<TS>20110801112601\</TS>

\</DAT>

> Чек продажу із податками, які не включені в ціну.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">  
\<C T="0">  
\<P N="1" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>  
\<M N="2" T="0" NM="ГОТІВКА" SM="900"/>  
\<E N="3" NO="19" SM="900" SE="800" FN="4538765845" TS="20110801112601"
TX="1" TXPR="12.50" TXSM="100" DTPR="0.00" DTSM="0" TXTY="1" TXAL="0"
CS="1"/>  
\</C>  
\<TS>20110801112601\</TS>

\</DAT>

> Чек повернення.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">  
\<C T="1">  
\<P N="1" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>  
\<M N="2" T="0" NM="ГОТІВКА" SM="800"/>  
\<E N="3" NO="19" SM="800" SE="667" FN="4538765845" TS="20110801112601"
TX="1" TXPR="20.00" TXSM="133" DTPR="0.00" DTSM="0" TXTY="1" TXAL="0"
CS="1"/>  
\</C>  
\<TS>20110801112601\</TS>

\</DAT>

> Чек продажу з відміною продажу.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">

\<C T="0" N="19">  
\<P N="1" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>

\<P N="2" C="0760557812999" NM="ВОДА МІНЕРАЛЬНА" SM="100" TX="1"/>

\<D N="3" TR="1" TY="1" PR="10.00" SM="90" TX="1" SM="90"/>

\<VD N="4">

\<NI NI="1"/>

\<NI NI="2"/>

\<NI NI="3"/>

\</VD>

\<P N="4" C="0760557812661" NM="Хліб" Q="2" PRC="370" SM="740" TX="1"/>

\<CP N="5" C="0760557812661" NM="Хліб" SM="370" TX="1"/>  
\<M N="6" T="0" NM="ГОТІВКА" SM="370"/>

\<E N="7" NO="19" SM="370" SE="308" FN="4538765845" TS="20110801112601"
TX="1" TXPR="20.00" TXSM="62" DTPR="0.00" DTSM="0" TXTY="0" TXAL="0"
CS="1"/>  
\</C>

\<TS>20110801112601\</TS>

\</DAT>

> Відміна всього чеку.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">

\<C T="0">  
\<P N="1" C="0760557812166" NM="T.sonic 615" SM="800" TX="1"/>

\<P N="2" C="0760557812999" NM="ВОДА МІНЕРАЛЬНА" SM="100" TX="1"/>

\<E N="3" CS="1" VD="1"/>  
\</C>

\<TS>20110801112601\</TS>

\</DAT>

> Службовий чек.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
V="1">  
\<C T="2">  
\<I N="1" T="0" NM="ГОТІВКА" SM="800"/>

\<E N="2"/>  
\</C>  
\<TS>20110801112601\</TS>

\</DAT>

**ПРИМІТКА.** Тег \<C> може також містити додаткові підтеги, не описані
в даному документі. Всі підтеги тега \<C> можуть містити додаткові
атрибути, не описані в даному документі. Наявність додаткових тегів і
атрибутів залежить від конкретної моделі РРО. Додаткові теги та атрибути
також беруть участь у розрахунку значення MAC.

## Формат пакетів даних чеків спеціалізованих РРО

Зміст чеку може відрізнятись для різних типів РРО. Формат пакетів даних
спеціалізованих РРО повинен відповідати наведеному в додатках Б. У разі
відсутності в додатках Б форматів пакетів даних чеків для конкретної
сфери застосування спеціалізованого РРО ці формати пакетів даних чеків
повинні бути наведені у технічних умовах конкретного спеціалізованого
РРО. Такі технічні умови погоджуються Національним банком України.

## Формат пакету даних Z-звіту 

\<DAT FN="1234567890" TN="ПН 345612052809" ZN="АА57506761" DI="415"
V="1">

\<Z NO="19">

\<!--зміст звіту-->

\</Z>

\<TS>20110801112601\</TS>

\</DAT>

\<MAC DI="415" NT="1234567890">

{значення MAC}

\</MAC>

Для РРО, які друкують контрольну стрічку, дата Z-звіту вказується з
нульовим значенням часу.

## Формат пакету даних Z-звіту РРО загального призначення 

Z-звіт міститься всередині тегу \<Z>. Формат тегу:

|       |              |         |
|-------|--------------|---------|
| Назва | Коментар     | Формат  |
| NO    | Номер звіту. | Decimal |

Z-звіт може вміщувати такі теги:

-   \<TXS> – підсумкова інформація по податковим ставкам

-   \<M> – підсумкова інформація оберту по типам оплати

-   \<IO> – підсумкова інформація по внесенню та винесенню грошей

-   \<NC> – підсумкова інформація по кількості чеків

-   \<OP> – підсумкова інформація по операціям переказу коштів

Для РРО, що друкують контрольну стрічку, вказуються лише теги \<TXS>,
\<NC>.

Тег \<TXS> містить визначення та звітну інформацію по певному податку.
Тег має атрибути:

<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 57%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>TX</td>
<td>Позначення податку</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ).</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TS</td>
<td>Дата встановлення податку</td>
<td><p>String</p>
<blockquote>
<p>YYYYMMDD</p>
</blockquote></td>
</tr>
<tr class="even">
<td>TXPR</td>
<td>Відсоток податку</td>
<td><p>Decimal</p>
<blockquote>
<p>00.00-99.99</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TXI</td>
<td>Податок по отриманих коштах</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TXO</td>
<td>Податок по виданим коштам</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>DTPR</td>
<td>Ставка додаткового збору у відсотках</td>
<td>Decima</td>
</tr>
<tr class="even">
<td>DTI</td>
<td>Додатковий збір по отриманих коштах</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>DTO</td>
<td>Додатковий збір по виданим коштам</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TXTY</td>
<td>Ознака податку не включеного в вартість</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – включено в вартість</p>
<p>1 – не включено в вартість</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TXAL</td>
<td>Алгоритм обчислення податку (в випадку TXAL="0" атрибут може бути відсутній)</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – ПДВ начисляється на ціну товару без урахування додаткового Збору</p>
<p>1 – ПДВ начисляється на ціну товару з урахування додаткового збору</p>
<p>2 – додатковий збір начисляється на ціну товару з урахуванням ПДВ</p>
<p>3 – акцизний податок</p>
</blockquote></td>
</tr>
<tr class="even">
<td>SMI</td>
<td>Підсумок операцій по отриманих коштах</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>SMO</td>
<td>Підсумок операцій по виданим коштам</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

> Дозволяється пропустити атрибут TXI, TXO, DTI, DTO, SMI, SMO, якщо
> вони пов’язаний з нульовою сумою коштів. Якщо на податок не
> відбувалося нарахувань на протязі звітного періоду, відповідний тег
> \<TXS> також може не включатися до звіту.

Для РРО, які друкують контрольну стрічку, атрибути TXI, TXO, DTI, DTO
можуть не вказуватись.

Тег \<M> містить інформацію по загальному підсумку операцій по
відповідній формі оплати. Тег має атрибути:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>T</td>
<td>Форма оплати.</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – готівкою</p>
<p>не 0 – безготівкові форми оплати</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Назва форми оплати (може не вказуватись).</td>
<td>String</td>
</tr>
<tr class="even">
<td>SMI</td>
<td>Сума отриманих коштів</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>SMO</td>
<td>Сума виданих коштів</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

> Дозволяється пропустити атрибути SMI, SMO, якщо вони пов’язані з
> нульовою сумою коштів. Якщо по формі оплати не відбувалося службових
> видач або внесень на протязі звітного періоду, відповідний тег \<M>
> також може не включатися до звіту.

Тег \<IO> містить інформацію по загальним сумам операцій службової
видачі та службового внесення по кожній формі оплати. Тег має атрибути:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>T</td>
<td>Форма оплати.</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – готівкою</p>
<p>не 0 – безготівкові форми оплати</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Назва форми оплати (може не вказуватись).</td>
<td>String</td>
</tr>
<tr class="even">
<td>SMI</td>
<td>Сума отриманих коштів</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>SMO</td>
<td>Сума виданих коштів</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

> Дозволяється пропустити атрибути SMI, SMO, якщо вони пов’язаний з
> нульовою сумою коштів. Якщо по формі оплати не відбувалося службових
> видач або внесень на протязі звітного періоду, відповідний тег \<IO>
> також може не включатися до звіту.

Тег \<NC> містить кількість чеків продажу та повернення. Тег має
атрибути:

|       |                            |         |
|-------|----------------------------|---------|
| Назва | Коментар                   | Формат  |
| NI    | Кількість чеків продажу    | Decimal |
| NO    | Кількість чеків повернення | Decimal |

Тег \<OP> містить кількість операцій переводу коштів, та загальну суму
комісії. Тег має атрибути:

|       |                                     |         |
|-------|-------------------------------------|---------|
| Назва | Коментар                            | Формат  |
| QP    | Кількість операції переводу коштів  | Decimal |
| QS    | Загальна сума комісії від переводів | Decimal |

## Приклади пакету даних Z-звіту РРО загального призначення

Z-звіт.

\<DAT FN="1234567890" TN="ПН 345612052809" ZN="АА57506761" DI="415"
V="1">

\<Z NO="275">  
\<TXS TX="0" SMI="25123"/>  
\<TXS TX="1" TS="20091201" TXPR="20.00" TXI="40854" TXO="1000"
DTPR="0.00" DTI="0" DTO="0" TXTY="0" TXAL="0" SMI="245123" SMO="6000"
/>  
\<M NM="ГОТІВКА" SMI="245123" SMO="6000"/>  
\<IO NM="ГОТІВКА" SMI="10000" SMO="249123"/>  
\<NC NI="18" NO="1"/>

\</Z>  
\<TS>20110801112601\</TS>

\</DAT>

Z-звіт із податком зі збором.

\<DAT FN="1234567890" TN="ПН 345612052809" ZN="АА57506761" DI="415"
V="1">

\<Z NO="275">  
\<TXS TX="0" SMI="25123"/>  
\<TXS TX="1" TS="20091201" TXPR="15.00" TXI="30641" TXO="750"
DTPR="5.00" DTI="10213" DTO="250" TXTY="0" TXAL="0" SMI="245123"
SMO="6000"/>  
\<M T="0" NM="ГОТІВКА" SMI="245123" SMO="6000"/>

\<M T="1" NM="ЧЕКОМ" SMI="134054" SMO="3240"/>  
\<IO T="0" NM="ГОТІВКА" SMI="10000" SMO="249123"/>

\<IO T="1" NM="ЧЕКОМ" SMI="0" SMO="130814"/>  
\<NC NI="18" NO="1"/>  
\</Z>  
\<TS>20110801112601\</TS>

\</DAT>

Z-звіт РРО, які друкують контрольну стрічку.

\<DAT FN="1234567890" TN="ПН 345612052809" ZN="АА57506761" DI="415"
V="1">

\<Z NO="275">  
\<TXS TX="0" SMI="25123"/>  
\<TXS TX="1" TS="20091201" TXPR="20.00" DTPR="0.00" TXTY="0" TXAL="0"
SMI="245123" SMO="6000"/>  
\<NC NI="18" NO="1"/>

\</Z>  
\<TS>20110801000000\</TS>

\</DAT>

**ПРИМІТКА.** Тег \<Z> може також містити додаткові підтеги. Всі підтеги
тегу \<Z> можуть містити додаткові атрибути. Наявність додаткових тегів
та атрибутів залежить від конкретної моделі РРО. Додаткові теги та
атрибути також беруть участь у розрахунку значення MAC.

## Формат пакету даних Z-звіту спеціалізованих РРО

Зміст пакету даних Z-звіту може відрізнятись для різних типів РРО.
Формат пакетів даних спеціалізованих РРО повинен відповідати наведеному
в додатках Б. У разі відсутності в додатках Б формату пакету даних
Z-звіту для конкретної сфери застосування спеціалізованого РРО цей
формат пакету даних Z-звіту повинен бути наведений у технічних умовах
конкретного спеціалізованого РРО. Такі технічні умови погоджуються
Національним банком України.

# 

# Забезпечення унікальності ідентифікації розрахункового документа

Для забезпечення унікальності ідентифікації розрахункового документа
наступні обов’язкові реквізити розрахункових документів, а саме
порядковий номер чека, дата та час проведення розрахункової операції,
фіскальний номер реєстратора розрахункових операцій, повинні
розміщуватись у кінці документа відразу перед написом „ФІСКАЛЬНИЙ ЧЕК”
(для фіскального касового чеку на товари (послуги)) або перед написом
„ВИДАТКОВИЙ ЧЕК” (для фіскального касового чеку видачі коштів) та
логотипом виробника. Вимоги щодо взаєморозміщення цих реквізитів
поширюються на реєстратори розрахункових операцій з контрольною стрічкою
в електронній формі, та реєстратори розрахункових операцій, що створюють
контрольну стрічку в друкованому вигляді та передають електронні копії
розрахункових документів та фіскальних звітних чеків в якості
контрольно-звітної інформації, і які включаються до Державного реєстру
реєстраторів розрахункових операцій після дати затвердження версії 1.1
протоколу передачі інформації.  
<span id="_Toc20216479" class="anchor"></span>Додаток А

# Алгоритм приведення пакету даних до канонічного вигляду 

Всі пакети даних зберігаються та передаються в канонічному вигляді
згідно наступних правил.

1.  Всі пробіли, табуляції, переноси рядків між тегами, перед першим
    > тегом та після останнього тегу видаляються

<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Початковий вигляд</td>
<td><p>&lt;tag1&gt;tag_value&lt;/tag1&gt;</p>
<p>&lt;tag2&gt;tag_velue_2&lt;/tag2&gt;</p></td>
</tr>
<tr class="even">
<td>Канонічний вигляд</td>
<td>&lt;tag1&gt;tag_value&lt;/tag1&gt;&lt;tag2&gt;tag_velue_2&lt;/tag2&gt;</td>
</tr>
</tbody>
</table>

2.  Всі теги приводяться до вигляду \<tag_name …>…\</tag_name>

<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Початковий вигляд</td>
<td><p>&lt;tag1&gt;tag_value&lt;/tag1&gt;</p>
<p>&lt;tag2 atr1="atr_value" /&gt;</p></td>
</tr>
<tr class="even">
<td>Канонічний вигляд</td>
<td>&lt;tag_1&gt;tag_value&lt;/tag_1&gt;&lt;tag_2 atr1="atr_value"&gt;&lt;/tag_2&gt;</td>
</tr>
</tbody>
</table>

3.  Всі пробіли та табуляції в старт-тегах, окрім значень атрибутів,
    > заміняються на один пробіл

<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Початковий вигляд</td>
<td><p>&lt;tag1&gt; this is tag value &lt;/tag1&gt;</p>
<p>&lt;tag2 atr1="atr value" atr2="atr value 2"/&gt;</p></td>
</tr>
<tr class="even">
<td>Канонічний вигляд</td>
<td>&lt;tag1&gt; this is tag value &lt;/tag1&gt;&lt;tag2 atr1="atr value " atr2="atr value 2"&gt;&lt;/tag2&gt;</td>
</tr>
</tbody>
</table>

4.  Всі атрибути всередині кожного тегу розміщуються в алфавітному
    > порядку

<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Початковий вигляд</td>
<td><p>&lt;tag1&gt; this is tag value &lt;/tag1&gt;</p>
<p>&lt;tag2 xyz="atr value" abc="atr value 2"/&gt;</p></td>
</tr>
<tr class="even">
<td>Канонічний вигляд</td>
<td>&lt;tag1&gt; this is tag value &lt;/tag1&gt;&lt;tag2 abc="atr value 2" xyz="atr value"&gt;&lt;/tag2&gt;</td>
</tr>
</tbody>
</table>

> Приклад перетворення реального документу:

<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Початковий вигляд</td>
<td><p>&lt;DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238" V="1"&gt;</p>
<p>&lt;C T="0"&gt;<br />
&lt;P N="1" C="120" NM="Хліб" SM="370" TX="1"/&gt;<br />
&lt;M N="2" T="0" SM="370"/&gt;</p>
<p>&lt;E N="3" NO="19" SM="370" FN="4538765845" TS="20110801112601" TX="1" TXPR="20.00" TXSM="125" DTPR="0.00" DTSM="0" TXTY="0" TXAL="0"/&gt;<br />
&lt;/C&gt;</p>
<p>&lt;TS&gt;20110801112601&lt;/TS&gt;</p>
<p>&lt;/DAT&gt;</p></td>
</tr>
<tr class="even">
<td>Канонічний вигляд</td>
<td>&lt;DAT DI="238" FN="4538765845" TN="ПН 345612052809" V="1" ZN="АА 57506761"&gt;&lt;C T="0"&gt;&lt;P C="120" N="1" NM="Хліб" SM="370" TX="1"&gt;&lt; /P&gt;&lt;M N="2" SM="370" T="0"&gt;&lt;/M&gt;&lt;E DTPR="0.00" DTSM="0" FN="4538 765845" N="3" NO="19" SM="370" TS="20110801112601" TX="1" TXAL= "0" TXPR="20.00" TXSM="125" TXTY="0"&gt;&lt;/E&gt;&lt;/C&gt;&lt;TS&gt;20110801112601 &lt;/TS&gt;&lt;/DAT&gt;</td>
</tr>
</tbody>
</table>

# Додаток Б1

# Формат пакетів даних РРО для АЗС

Чек розміщується всередині тегу \<C>. Атрибути тегу:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>Т</td>
<td>Тип чеку</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – чек продажу</p>
<p>1 – чек повернення</p>
<p>2 – службовий чек</p>
<p>3 – приймання пального</p>
</blockquote></td>
</tr>
</tbody>
</table>

Чеки продажу та повернення РРО для АЗС можуть містити операції продажу,
відміни продажу пального (теги \<PP> та \<CPP>), та операції продажу,
відміни продажу супутніх товарів (теги \<P> та \<CP>). Формат тегів \<P>
та \<CP> ідентичний формату цих тегів для РРО загального призначення.

> Атрибути тегу \<PP> (продаж)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Код товару</td>
<td>String</td>
</tr>
<tr class="even">
<td>CD</td>
<td>Штрихкод (необов’язковий атрибут для РРО, які не підтримують роботу з штрихкодами)</td>
<td>String</td>
</tr>
<tr class="odd">
<td>NZ</td>
<td>Номер замовлення на відпуск пального з ПРК (необов’язковий атрибут)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>NM</td>
<td>Назва товару (пального)</td>
<td>String</td>
</tr>
<tr class="odd">
<td>OV</td>
<td>Назва одиниці виміру (необов’язковий атрибут)</td>
<td>String</td>
</tr>
<tr class="even">
<td>PRK</td>
<td>Номер паливно-роздавальної колонки</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>KRK</td>
<td>Номер крану ПРК (необов’язковий атрибут)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>PV</td>
<td><p>Ознака продажу в режимі повірки.</p>
<p>Може не вказуватись при PV=”0”.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>- 1 – чек в режимі повірки</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Сума операції</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>Q</td>
<td>Кількість (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>PRC</td>
<td>Ціна товару (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>ТX</td>
<td>Позначення податку, яким обкладається товар.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
</tbody>
</table>

> Атрибути тегу \<CPP> (відмова від продажу)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Код товару</td>
<td>String</td>
</tr>
<tr class="even">
<td>CD</td>
<td>Штрихкод (необов’язковий атрибут для РРО, які не підтримують роботу з штрихкодами)</td>
<td>String</td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Назва товару (пального)</td>
<td>String</td>
</tr>
<tr class="even">
<td>PRK</td>
<td>Номер паливно-роздавального крану</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>KRK</td>
<td>Номер крану ПРК (необов’язковий атрибут)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>SM</td>
<td>Сума операції</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>Q</td>
<td>Кількість (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>PRC</td>
<td>Ціна товару (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>ТX</td>
<td>Позначення податку, яким обкладається товар.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
</tbody>
</table>

> Атрибути тегу \<E> (закриття чеку)

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 52%" />
<col style="width: 38%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>NO</td>
<td>Номер фіскального чеку</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>RNO</td>
<td>Номер фіскального чеку, по котрому здійснюється повернення; вказується тільки для чеків повернення</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Загальна сума чеку</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>SE</td>
<td>Сума чеку без урахування ПДВ та додаткових зборів (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>FN</td>
<td>Фіскальний номер РРО</td>
<td>String</td>
</tr>
<tr class="even">
<td>TS</td>
<td>Дата та час формування чеку</td>
<td><p>String</p>
<p>YYYYMMDDhhmmss</p></td>
</tr>
<tr class="odd">
<td>ТX</td>
<td>Позначення податку, яким обкладаються товари. У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
<tr class="even">
<td>TXPR</td>
<td><p>Ставка податку у відсотках.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TXSM</td>
<td><p>Сума податку.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>DTPR</td>
<td><p>Ставка додаткового збору у відсотках.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>DTSM</td>
<td><p>Сума додаткового збору.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TXTY</td>
<td><p>Ознака податку не включеного в вартість.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – включено в вартість</p>
<p>1 – не включено в вартість</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TXAL</td>
<td><p>Алгоритм обчислення податку (в випадку TXAL="0" атрибут може не вказуватись).</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – ПДВ начисляється на ціну товару без урахування додаткового збору</p>
<p>1 – ПДВ начисляється на ціну товару з урахування додаткового збору</p>
<p>2 – додатковий збір начисляється на ціну товару з урахуванням ПДВ</p>
</blockquote></td>
</tr>
<tr class="even">
<td>CS</td>
<td>Номер касира, котрий закінчив чек (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>VD</td>
<td>Відміна всього чеку (може не вказуватись при VD="0"). При VD="1" всі атрибути, окрім N і VD, можуть бути відсутніми.</td>
<td><p>Decimal</p>
<blockquote>
<p>1 – чек відмінено</p>
</blockquote></td>
</tr>
</tbody>
</table>

Формат пакетів даних службових чеків ідентичний формату пакетів даних
РРО загального призначення.

Пакет даних приймання пального може вміщувати наступні теги:

-   \<IF> – приймання пального

-   \<E> – закриття (закінчення) чеку

Атрибути тегу \<IF> (приймання пального):

|       |                                                                                    |         |
|-------|------------------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                           | Формат  |
| N     | Порядковий номер операції в чеку.                                                  | Decimal |
| C     | Код товару (пального)                                                              | Decimal |
| CD    | Штрихкод (необов’язковий атрибут для РРО, які не підтримують роботу з штрихкодами) | Decimal |
| NM    | Назва товару (пального)                                                            | String  |
| NR    | Номер розхідного резервуару                                                        | Decimal |
| Q     | Кількість (може не вказуватись при Q=”1000”)                                       | Decimal |

Атрибути тегу \<E> (закриття чеку):

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 52%" />
<col style="width: 38%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>CS</td>
<td>Номер касира, котрий закінчив чек (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>VD</td>
<td>Відміна всього чеку (може не вказуватись при VD="0"). При VD="1" тег &lt;CS&gt; може бути відсутніми.</td>
<td><p>Decimal</p>
<blockquote>
<p>1 – чек відмінено</p>
</blockquote></td>
</tr>
</tbody>
</table>

> Для пакетів даних, не пов’язаних із продажем/поверненням товарів
> (службові чеки), можуть вказуватись лише атрибути N і VD.

Z-звіт розміщується всередині тегу \<Z>. Атрибути тегу:

|       |              |         |
|-------|--------------|---------|
| Назва | Коментар     | Формат  |
| NO    | Номер звіту. | Decimal |

Z-звіт може вміщувати такі теги:

-   \<TXS> – підсумкова інформація по податковим ставкам

-   \<M> – підсумкова інформація оберту по типам оплати

-   \<IO> – підсумкова інформація по внесенню та винесенню грошей

-   \<NC> – підсумкова інформація по кількості чеків

-   \<F> – підсумкова інформація по кожному типу палива

Для РРО, що друкують контрольну стрічку, вказуються лише теги \<TXS>,
\<NC>, \<F>.

Формат тегів \<TXS>, \<M>, \<IO>, \<NC> ідентичний формату цих тегів РРО
для загального призначення.

Атрибути тегу \<F>:

|       |                                                                                                                     |         |
|-------|---------------------------------------------------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                                                            | Формат  |
| NM    | Назва товару (пального)                                                                                             | String  |
| IF    | Кількість прийнятого пального у мілілітрах (може не вказуватись для РРО, що друкують контрольну стрічку)            | Decimal |
| OF    | Кількість відпущеного пального                                                                                      | Decimal |
| OFP   | Кількість пального, відпущеного в процесі повірки ПРК (може не вказуватись для РРО, що друкують контрольну стрічку) | Decimal |
| SMI   | Кошти, прийняті за відпущене пальне                                                                                 | Decimal |
| SF    | Залишок пального (може не вказуватись для РРО, що друкують контрольну стрічку)                                      | Decimal |

Тег \<F> містить один або декілька підтегів \<SMI>, в яких вказується
сума отриманих коштів по даному найменуванню пального по кожній формі
оплати та, та один або декілька підтегів \<SF>, в яких вказується
залишок пального в кожному розхідному резервуарі.

Атрибути тегу \<SMI>:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 52%" />
<col style="width: 38%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>T</td>
<td>Форма оплати.</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – готівкою</p>
<p>не 0 – безготівкові форми оплати</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Назва оплати (може не вказуватись).</td>
<td>String</td>
</tr>
<tr class="even">
<td>SM</td>
<td>Сума оплати.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>OF</td>
<td>Кількість відпущенного пального по даній формі оплати</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

Атрибути тегу \<SF> (може не вказуватись для РРО, що друкують контрольну
стрічку):

|       |                                                                          |         |
|-------|--------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                 | Формат  |
| NR    | Номер розхідного резервуару                                              | Decimal |
| NP    | Номер паливно-роздавальної колонки, підключеної до розхідного резервуару | Decimal |
| SF    | Залишок пального                                                         | Decimal |

У випадку, якщо до одного резервуару підключено декілька
паливно-роздавальних колонок, тег \<SF> містить підтеги \<NPS> в яких
атрибутами NP вказується номери паливно-роздавальних колонок.

# Приклади 

Чек відпуску пального:

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
DT=”1” V="1">

\<C T="0">  
\<P N="1" C="1" NM="А-95" PRK=”1” SM="16500" Q=”15000” PRC=”1100”
TX="1"/>  
\<M N="2" T="0" NM="ГОТІВКА" SM="16500"/>

\<E N="3" NO="2171" SM="16500" SE="13750" FN="4538765845"
TS="20110801112601" TX="1" TXPR="20.00" TXSM="2750" DTPR="0.00" DTSM="0"
TXTY="0" TXAL="0" CS="1"/>  
\</C>

\<TS>20110801112601\</TS>

\</DAT>

Чек приймання пального:

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
DT=”1” V="1">

\<C T="3">  
\<IF N=”1” C=”1” NM=”А-95” NR=”1” Q=”5000000”/>

\<IF N=”2” C=”2” NM=”А-98” NR=”2” Q=”10000000”/>

\<IF N=”3” C=”3” NM=”А-76” NR=”3” Q=”4500000”/>

\<IF N=”4” C=”4” NM=”ДП” NR=”4” Q=”1500000”/>

\<IF N=”5” C=”5” NM=”НП №5” NR=”5” Q=”4500000”/>

\<E N="6" CS="1"/>  
\</C>

\<TS>20110801112601\</TS>

\</DAT>

Z-звіт.

\<DAT FN="1234567890" TN="ПН 345612052809" ZN="АА57506761" DI="415"
DT=”1” V="1">

\<Z NO="275">  
\<TXS TX="1" TS="20091201" TXPR="20.00" TXI="5500" TXO="0" DTPR="0.00"
DTI="0" DTO="0" TXTY="0" TXAL="0" SMI="33000" SMO="0"/>  
\<M NM="ГОТІВКА" SMI="22000" SMO="5000" T="0"/>

\<M NM="КАРТКА" SMI="11000" SMO="0" T="1"/>  
\<IO NM="ГОТІВКА" SMI="10000" SMO="5000" T="0"/>  
\<NC NI="18" NO="1"/>

\<F NM=”А-95” IF=”5000000” OF=”30000” OFP=”0” SMI=”33000” SF=”4970000”>

\<SMI T=”0” NM=”ГОТІВКА” SM=”2000” OF=”22000”/>

\<SMI T=”2” NM=”КАРТКА” SM=”1000” OF=”11000”/>

\<SF NR=”1” NP=”1” SF=”4000000”>

\<NPS NP=”1”/>

\<NPS NP=”2”/>

\</SF>

\<SF NR=”2” NP=”3” SF=”970000”/>

\</F>

\</Z>  
\<TS>20110801112601\</TS>

\</DAT>

# Додаток Б2

# Формат пакетів даних РРО з купівлі-продажу іноземної валюти

Атрибути тегу Z:

|       |                                |         |
|-------|--------------------------------|---------|
| Назва | Коментар                       | Формат  |
| NO    | Номер звіту.                   | Decimal |
| RID   | Ідентифікатор службового звіту | Decimal |

Z-звіт вміщує теги \<VL> для кожної іноземної валюти, по якій
здійснювались операції. Атрибути тегу:

|       |                                                                                                                    |         |
|-------|--------------------------------------------------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                                                           | Формат  |
| C     | Код валюти                                                                                                         | Decimal |
| N     | Порядковий номер валюти.                                                                                           | Decimal |
| NC    | Символьний код валюти                                                                                              | String  |
| NM    | Найменування іноземної валюти                                                                                      | String  |
| KP    | Курс купівлі(ХХХХ.ХХХХХХХХ) на момент закриття зміни або курс операцій у випадку зміни курсу.                      | Decimal |
| KS    | Курс продажу(ХХХХ.ХХХХХХХХ) на момент закриття зміни або курс операцій у випадку зміни курсу.                      | Decimal |
| KR    | Курс регулятора(ХХХХ.ХХХХХХХХ)                                                                                     | Decimal |
| VI    | Загальна сума купленої іноземної валюти                                                                            | Decimal |
| VO    | Загальна сума проданої іноземної валюти                                                                            | Decimal |
| NI    | Загальна сума отриманої національної валюти                                                                        | Decimal |
| NO    | Загальна сума виданої національної валюти                                                                          | Decimal |
| VIS   | Загальна сума повернутої клієнтами іноземної валюти за операціями «сторно»                                         | Decimal |
| VOS   | Загальна сума виданої клієнтам іноземної валюти за операціями «сторно»                                             | Decimal |
| NIS   | Загальна сума повернутої клієнтами національної валюти за операціями «сторно»                                      | Decimal |
| NOS   | Загальна сума виданої клієнтам національної валюти за операціями «сторно»                                          | Decimal |
| VIC   | Загальна сума прийнятої іноземної валюти за операціями конвертації                                                 | Decimal |
| VOC   | Загальна сума виданої іноземної валюти за операціями конвертації                                                   | Decimal |
| VON   | Загальна сума виданої іноземної валюти за «операціями обміну невикористаної національної валюти»                   | Decimal |
| VIN   | Загальна сума прийнятої від клієнтів національної валюти за «операціями обміну невикористаної національної валюти» | Decimal |
| SC    | Загальна сума комісії за операціями конвертації                                                                    | Decimal |
| GA    | Отримано авансів                                                                                                   | Decimal |
| GP    | Отримано підкріплень                                                                                               | Decimal |
| SI    | Здано по інкасації                                                                                                 | Decimal |
| VSON  | Повернуто клієнтами валюти по сторно обміну невикорист. нац. валюти                                                | Decimal |
| VSIN  | Видано клієнтам нац. валюти за сторно обміну невикорист. нац. валюти                                               | Decimal |
| VSO   | Видано ін. валюти по сторно конвертації                                                                            | Decimal |
| VSI   | Повернуто ін. валюти по сторно конвертації                                                                         | Decimal |
| SCS   | Повернуто суму комісії з сторно конвертації                                                                        | Decimal |

ПРИМІТКА: Якщо протягом зміни відбувалась зміна курсів купівлі-продажу
іноземної валюти або крос-курсів обміну іноземної валюти, тег \<VL>
повторюється для кожного курсу відповідної валюти

Атрибути тегу \<KK> (крос курс)

|       |            |                           |         |
|-------|------------|---------------------------|---------|
| Назва | Коментар   |                           | Формат  |
| C     | Код валюти |                           | String  |
| NC    |            | Символьний код валюти     | String  |
| VKK   |            | Крос-курс (ХХХХ.ХХХХХХХХ) | Decimal |

Тег \<NIO> містить кількість чеків продажу та повернення. Тег має
атрибути:

|       |                                                                          |         |
|-------|--------------------------------------------------------------------------|---------|
| Назва | Коментар                                                                 | Формат  |
| TGA   | Отримано усього авансів національною валютою                             | Decimal |
| TGP   | Отримано усього підкріплень національною валютою                         | Decimal |
| TIN   | Усього здано по інкасації національною валютою                           | Decimal |
| TNI   | Кількість розрахункових документів за зміну                              | Decimal |
| TKA   | Прийнято національної валюти для переказу                                | Decimal |
| TLP   | Видано національної валюти при виплаті переказу                          | Decimal |
| TMN   | Отримано комісії в національній валюті при здійсненні операцій переказів | Decimal |
| TNK   | Кількість операцій (документів) переказів, або виплат переказів          | Decimal |

Тег \<TXS> містить визначення та звітну інформацію по певному податку.
Тег може містити додаткові атрибути:

|      |                                                                       |         |
|------|-----------------------------------------------------------------------|---------|
| DTI  | Додатковий збір від операції продажу валюти                           | Decimal |
| DTIS | Додатковий збір від операції сторно продажу валюти                    | Decimal |
| DTO  | Додатковий збір від операції купівлі валюти                           | Decimal |
| DTOS | Додатковий збір від операції сторно купівлі валюти                    | Decimal |
| DTNM | Найменування додаткового сбіру                                        | String  |
| DTIP | Додатковий збір по отриманих коштах при операції перерахування коштів | Decimal |
| DTOP | Додатковий збір по виданим коштах при операції перерахування коштів   | Decimal |

Атрибути чеку операції, або чеку-довідки:

Атрибути тегу \<P> (продаж)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Код валюти</td>
<td>String</td>
</tr>
<tr class="even">
<td>NC</td>
<td>Символьний код валюти</td>
<td>String</td>
</tr>
<tr class="odd">
<td>NM</td>
<td>Найменування валюти</td>
<td>String</td>
</tr>
<tr class="even">
<td>OP</td>
<td>Тип операції</td>
<td><p>Decimal</p>
<p>1 - Купівля;</p>
<p>2 - Сторно купівлі;</p>
<p>3 - Продаж;</p>
<p>4 - Сторно продажи;</p>
<p>5 - Зворотній обмін;</p>
<p>6 - Конвертація;</p>
<p>7 – Сторно зворотного обміну;</p>
<p>8 – Сторно конвертації.</p></td>
</tr>
<tr class="odd">
<td colspan="3">Як що тип операції е конвертація, наступні атрибути присутні:</td>
</tr>
<tr class="even">
<td>PC</td>
<td>Код валюти виданої</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>PNC</td>
<td>Символьний код валюти виданої</td>
<td>String</td>
</tr>
<tr class="even">
<td>PNM</td>
<td>Найменування валюти виданої</td>
<td>String</td>
</tr>
<tr class="odd">
<td>QR</td>
<td>Курс операції (ХХХХ.ХХХХХХХХ)</td>
<td>String</td>
</tr>
<tr class="even">
<td>QT</td>
<td>Дата та час встановлення курсу (присутній тільки для чеку-довідки)</td>
<td>String</td>
</tr>
<tr class="odd">
<td>SI</td>
<td>Сума валюти по типу операцій вказаної у атрибуті ‘OP’ (іноземна валюта)</td>
<td><p>Decimal</p>
<p>Для типу (1, 4, 6, 7) прийнятої;</p>
<p>Для типу (2, 3, 5, 8) виданої;</p></td>
</tr>
<tr class="even">
<td>SJ</td>
<td>Сума валюти по типу операцій вказаної у атрибуті ‘OP’(національна валюта)</td>
<td><p>Decimal</p>
<p>Для типу (1, 4, 6, 7) виданої;</p>
<p>Для типу (2, 3, 5, 8) прийнятої;</p></td>
</tr>
<tr class="odd">
<td colspan="3">Як що тип операції є конвертація, наступний атрибут присутній:</td>
</tr>
<tr class="even">
<td>SС</td>
<td>Сума комісії конвертації</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TN</td>
<td>Кількість розрахункових документів по операції (присутній тільки для чеку-довідки)</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

Атрибути тегу \<IO> (службових документів)

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 0%" />
<col style="width: 55%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td colspan="2">Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td colspan="2">Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td colspan="2">Код валюти</td>
<td>String</td>
</tr>
<tr class="even">
<td colspan="2">NC</td>
<td>Символьний код валюти</td>
<td>String</td>
</tr>
<tr class="odd">
<td colspan="2">NM</td>
<td>Найменування валюти</td>
<td>String</td>
</tr>
<tr class="even">
<td colspan="2">OP</td>
<td>Тип операції</td>
<td><p>Decimal</p>
<p>1 – Отримання авансу;</p>
<p>2 – Отримання підкріплення;</p>
<p>3 – Інкасація;</p></td>
</tr>
<tr class="odd">
<td>SM</td>
<td colspan="2">Сума операції.</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

ПРИМІТКА: Якщо протягом зміни проводилися операції, що підлягають
оподаткуванню, в тег \<Z> включаються підтеги \<\<TXS>, які містять
звітну інформацію по відповідним податковим групам.

# Приклад 

<u>Службові чеки</u>

\<RQ V="1">

\<DAT DI="130" DT="3" FN="1111111111" TN="ПН 3333333333 " V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="978" N="1" NC="EUR" NM="Євро" OP="1" SM="50000">\</IO>
>
> \<E N="2" NO="396">\</E>

\</C>

\<TS>20190315134834\</TS>

\</DAT>

\<MAC DI="130" NT="2301">ABoAAAEHAAAAAAQAAAa6AAAI/QABHY+zPumkE9Y=\</MAC>

\<DAT DI="131" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="840" N="1" NC="USD" NM="Доллар США" OP="1" SM="100000">\</IO>
>
> \<E N="2" NO="397">\</E>

\</C>

\<TS>20190315134947\</TS>

\</DAT>

\<MAC DI="131" NT="2302">ABoAAAEIAAAAAAQAAAa6AAAI/gABHY+zPouP6aY=\</MAC>

\<DAT DI="132" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="0" N="1" NC="Грн" NM="Нацiональна валюта" OP="1" SM="1000000">
> \</IO>
>
> \<E N="2" NO="398">\</E>

\</C>

\<TS>20190315135014\</TS>

\</DAT>

\<MAC DI="132" NT="2303">ABoAAAEHAAAAAAQAAAa6AAAI/wABHY+zPm1+SaM=\</MAC>

\<DAT DI="133" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="0" N="1" NC="Грн" NM="Нацiональна валюта" OP="2" SM="2000000">
> \</IO>
>
> \<E N="2" NO="399">\</E>

\</C>

\<TS>20190315135027\</TS>

\</DAT>

\<MAC DI="133" NT="2304">ABoAAAEHAAAAAAQAAAa6AAAJAAABHY+zPqkaoxQ=\</MAC>

\<DAT DI="134" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="840" N="1" NC="USD" NM="Доллар США" OP="2" SM="100000"/IO>
>
> \<E N="2" NO="400">\</E>

\</C>

\<TS>20190315135054\</TS>

\</DAT>

\<MAC DI="134" NT="2305">ABoAAAEIAAAAAAQAAAa6AAAJAQABHY+zPtCqbUo=\</MAC>

\<DAT DI="135" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="840" N="1" NC="USD" NM="Доллар США" OP="3" SM="50000">\</IO>
>
> \<E N="2" NO="401">\</E>

\</C>

\<TS>20190315135107\</TS>

\</DAT>

\<MAC DI="135" NT="2306">ABoAAAEHAAAAAAQAAAa6AAAJAgABHY+zPmimiPM=\</MAC>

\<DAT DI="136" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="2">

> \<IO C="840" N="1" NC="USD" NM="Доллар США" OP="3" SM="50000">\</IO>
>
> \<E N="2" NO="402">\</E>

\</C>

> \<TS>20190315135134\</TS>

\</DAT>

\<MAC DI="136" NT="2307">ABoAAAEHAAAAAAQAAAa6AAAJAwABHY+zPpaOMhM=\</MAC>

\<DAT DI="137" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="840" N="1" NC="USD" NM="Доллар США" OP="1" QR="0027.40000000" SI="30000" SJ="822000">\</P>
>
> \<E N="2" NO="81">\</E>

\</C>

\<TS>20190315135201\</TS>

\</DAT>

\<MAC DI="137" NT="2308">ABoAAAEjAAAAAAQAAAa6AAAJBAABHY+zPqp0zQk=\</MAC>

\<DAT DI="138" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="840" N="1" NC="USD" NM="Доллар США" OP="2" QR="0027.40000000" 
> SI="30000" SJ="822000">\</P>
>
> \<E N="2" NO="82">\</E>

\</C>

\<TS>20190315135223\</TS>

\</DAT>

\<MAC DI="138" NT="2309">ABoAAAEjAAAAAAQAAAa6AAAJBQABHY+zPhhXznc=\</MAC>

\<DAT DI="139" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="978" N="1" NC="EUR" NM="Євро" OP="3" QR="0029.40000000" SI="10000" SJ="294000">\</P>
>
> \<E N="2" NO="83">\</E>

\</C>

\<TS>20190315135247\</TS>

\</DAT>

\<MAC DI="139" NT="2310">ABoAAAEjAAAAAAQAAAa6AAAJBgABHY+zPnd/gSQ=\</MAC>

\<DAT DI="140" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="978" N="1" NC="EUR" NM="Євро" OP="4" QR="0029.40000000" SI="10000" SJ="294000">\</P>
>
> \<E N="2" NO="84">\</E>

\</C>

\<TS>20190315135315\</TS>

\</DAT>

\<MAC DI="140" NT="2311">ABoAAAEjAAAAAAQAAAa6AAAJBwABHY+zPi6biRo=\</MAC>

\<DAT DI="141" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="840" N="1" NC="USD" NM="Доллар США" OP="5" QR="0027.80000000" SI="5000" SJ="139000">\</P>
>
> \<E N="2" NO="85">\</E>

\</C>

\<TS>20190315135422\</TS>

\</DAT>

\<MAC DI="141" NT="2312">ABoAAAEiAAAAAAQAAAa6AAAJCAABHY+zPiXr9MA=\</MAC>

\<DAT DI="142" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="978" N="1" NC="EUR" NM="Євро" OP="6" PC="840" PNC="USD" PNM="Доллар
> США" QR="0001.28640000" SI="10000" SJ="12864"SC="2000">\</P>

\<E N="2" NO="86">\</E>

\</C>

\<TS>20190315135537\</TS>

\</DAT>

\<MAC DI="142" NT="2313">ABoAAAFmAAAAAAQAAAa6AAAJCQABHY+zPgyE9yY=\</MAC>

\<DAT DI="143" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="840" N="1" NC="USD" NM="Доллар США" OP="7" QR="0027.80000000"
>  SI="5000" SJ="139000">\</P>
>
> \<E N="2" NO="87">\</E>

\</C>

\<TS>20190315135644\</TS>

\</DAT>

\<MAC DI="143" NT="2314">ABoAAAEiAAAAAAQAAAa6AAAJCgABHY+zPn1gtYc=\</MAC>

\<DAT DI="144" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="5">

> \<P C="978" N="1" NC="EUR" NM="Євро" OP="8" PC="840" PNC="USD" PNM="Доллар
> США" QR="0001.28640000" SI="10000" SJ="12864"SC="2000">\</P>
>
> \<E N="2" NO="88">\</E>

\</C>

\<TS>20190315140143\</TS>

\</DAT>

\<MAC DI="144" NT="2315">ABoAAAFmAAAAAAQAAAa6AAAJCwABHY+zPvAUW8w=\</MAC>

\<DAT DI="145" DT="3" FN="1111111111" TN="ПН 3333333333" V="1" ZN="ВБ3001028926">

\<C T="6">

> \<P C="840" N="1" NC="USD" NM="Доллар США" OP="1" QR="0027.60000000" QT="20190315113900" SI="50000" SJ="1380000" TN="1">\</P>
>
> \<P C="840" N="2" NC="USD" NM="Доллар США" OP="2" QR="0027.60000000" QT="20190315114000" SI="30000" SJ="828000" TN="1">\</P>
>
> \<P C="840" N="3" NC="USD" NM="Доллар США" OP="3" QR="0028.20000000" QT="20190314114100" SI="30000" SJ="846000" TN="1">\</P>
>
> \<P C="840" N="4" NC="USD" NM="Доллар США" OP="4" QR="0028.20000000" QT="20190315114200" SI="5000" SJ="141000" TN="1">\</P>
>
> \<P C="840" N="5" NC="USD" NM="Доллар США" OP="5" QR="0028.20000000" QT="20190314114300" SI="10000" SJ="282000" TN="1">\</P>
>
> \<P C="978" N="6" NC="EUR" NM="Євро" OP="6" PC="840" PNC="USD" PNM="Доллар
> США" QR="0001.06000000" QT="20190315114400"SI="20000" SJ="21200" SC="3000" TN="1">\</P>
>
> \<P C="840" N="7" NC="USD" NM="Доллар США" OP="7" QR="0028.20000000" QT="20190314114500" SI="5000" SJ="141000" TN="1">\</P>
>
> \<P C="978" N="8" NC="EUR" NM="Євро" OP="8" PC="840" PNC="USD" PNM="Доллар
> США" QR="0001.06000000" QT="20190315114600"SI="10000" SJ="10600"
> SC="1500"  TN="1">\</P>
>
> \<E N="9" NO="89">\</E>

\</C>

\<TS>20190315142450\</TS>

\</DAT>

\<MAC DI="145" NT="2316">ABoAAAWzAAAAAAQAAAa6AAAJDAABHY+zPjSWR8Y=\</MAC>

\<DAT DI="146" DT="3" FN="1111111111" TN="ПН 3333333333 " V="1" ZN="ВБ3001028926">

\<Z NO="34">

> \<VL C="840" GA="100000" GP="100000" KP="0027.40000000" KR="0027.65000000" KS="0027.80000000" N="1" NC="USD" NI="846000"NIS="1650000" NM="Доллар США" NO="2202000" NOS="141000" SC="0" SCS="0" SI="100000" VI="80000" VIC="0" VIN="421000" VIS="5000"VO="30000" VOC="34064" VON="15000" VOS="60000" VSI="23464" VSIN="280000" VSO="0" VSON="10000">\</VL>
>
> \<VL C="978" GA="50000" GP="0" KP="0029.10000000" KR="0029.27000000" KS="0029.40000000" N="2" NC="EUR" NI="294000" NIS="0"NM="Євро " NO="0" NOS="294000" SC="5000" SCS="3500" SI="0" VI="0" VIC="30000" VIN="0" VIS="10000" VO="10000" VOC="0" VON="0"VOS="0" VSI="0" VSIN="0" VSO="20000" VSON="0">
>
> \<KK C="840" NC="USD" VKK="0001.28640000">\</KK>
>
> \</VL>

\<TXS DTPR="0">\</TXS>

\<NIO TGA="1000000" TGP="2000000" TIN="0" TKA="0" TLP="0" TMN="0" TNI="16" TNK="0">\</NIO>

\</Z>

\<TS>20190315142457\</TS>

\</DAT>

\<MAC DI="146" NT="2317">ABoAAAPpAAAAAAQAAAa6AAAJDQABHY+zPt3oa9g=\</MAC>

\</RQ>

 

# Додаток Б3

# Формат пакетів даних РРО електронних таксометрів

Чек розміщується всередині тегу \<C>. Атрибути тегу:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>Т</td>
<td>Тип чеку</td>
<td><p>Decimal</p>
<blockquote>
<p>0 – чек продажу</p>
</blockquote></td>
</tr>
</tbody>
</table>

Формат пакетів даних чеків продажу ідентичний формату пакетів даних РРО
загального призначення, за виключенням тегів \<P> (продаж) та \<E>
(закриття чеку). Операція продажу послуги таксометра міститься в тегу
\<PT>.

Атрибути тегу \<PT>:

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 56%" />
<col style="width: 32%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку.</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Код послуги</td>
<td>String</td>
</tr>
<tr class="even">
<td>NM</td>
<td>Назва послуги</td>
<td>String</td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Сума операції</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>Q</td>
<td>Кількість (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>QT</td>
<td>Кількість часу (вказується лише для послуг, вартість яких розраховується на основі часу)</td>
<td><p>Decimal</p>
<blockquote>
<p>hhmmss</p>
</blockquote></td>
</tr>
<tr class="even">
<td>PRC</td>
<td>Ціна послуги (може не вказуватись при Q=”1000”)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>ТX</td>
<td>Позначення податку, яким обкладається послуга.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
</tbody>
</table>

Атрибути тегу \<E>:

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 52%" />
<col style="width: 38%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>N</td>
<td>Порядковий номер операції в чеку</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>NO</td>
<td>Номер фіскального чеку</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TRN</td>
<td>Державний реєстраційний номер транспортного засобу</td>
<td>String</td>
</tr>
<tr class="odd">
<td>SM</td>
<td>Загальна сума чеку</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>SE</td>
<td>Сума чеку без урахування ПДВ та додаткових зборів (може не вказуватись)</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>FN</td>
<td>Фіскальний номер РРО</td>
<td>String</td>
</tr>
<tr class="even">
<td>TS</td>
<td>Дата та час формування чеку</td>
<td><p>String</p>
<p>YYYYMMDDhhmmss</p></td>
</tr>
<tr class="odd">
<td>ТX</td>
<td>Позначення податку, яким обкладаються товари. У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</td>
<td><p>String</p>
<blockquote>
<p>0 – без податку (звільнені від оподаткування)</p>
<p>-1 – не є об’єктом оподаткування</p>
<p>1234… – позначення відповідної ставки податку (АБВГ…).</p>
</blockquote></td>
</tr>
<tr class="even">
<td>TXPR</td>
<td><p>Ставка податку у відсотках.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TXSM</td>
<td><p>Сума податку.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>DTPR</td>
<td><p>Ставка додаткового збору у відсотках.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>DTSM</td>
<td><p>Сума додаткового збору.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TXTY</td>
<td><p>Ознака податку не включеного в вартість.</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – включено в вартість</p>
<p>1 – не включено в вартість</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TXAL</td>
<td><p>Алгоритм обчислення податку (в випадку TXAL="0" атрибут може не вказуватись).</p>
<p>У разі, якщо товари обкладаються декількома податками, атрибут не використовується.</p></td>
<td><p>Decimal</p>
<blockquote>
<p>0 – ПДВ начисляється на ціну товару без урахування додаткового збору</p>
<p>1 – ПДВ начисляється на ціну товару з урахування додаткового збору</p>
<p>2 – додатковий збір начисляється на ціну товару з урахуванням ПДВ</p>
</blockquote></td>
</tr>
<tr class="even">
<td>CS</td>
<td>Код водія, котрий видав чек</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>VD</td>
<td>Відміна всього чеку (може не вказуватись при VD="0"). При VD="1" всі атрибути, окрім N, TRN і VD, можуть бути відсутніми.</td>
<td><p>Decimal</p>
<blockquote>
<p>1 – чек відмінено</p>
</blockquote></td>
</tr>
</tbody>
</table>

> У разі, якщо в чеку продавались товари з декількома податковими
> групами, тег закриття чеку повинен включати теги \<TX> з атрибутами
> TX, TXPR, TXSM, DTPR, DTSM, TXTY і TXAL, значення яких відповідають
> параметрам відповідного податку.
>
> Для пакетів даних, не пов’язаних із продажем/поверненням товарів
> (службові чеки), можуть вказуватись лише атрибути N, TRN і VD.

Z-звіт міститься всередині тегу \<Z>. Формат тегу:

|       |              |         |
|-------|--------------|---------|
| Назва | Коментар     | Формат  |
| NO    | Номер звіту. | Decimal |

Z-звіт може вміщувати такі теги:

-   \<TXS> – підсумкова інформація по податковим ставкам

-   \<M> – підсумкова інформація оберту по типам оплати

-   \<IO> – підсумкова інформація по внесенню та винесенню грошей

-   \<NC> – підсумкова інформація по кількості чеків, сталу
    транспортного засобу та відстані проїзду

-   \<TRB> - інформація про використані тарифи

Для РРО, що друкують контрольну стрічку, вказуються лише теги \<TXS>,
\<NC>, \<TRB>.

Формат тегів \<TXS>, \<M>, \<IO> ідентичний формату цих тегів РРО для
загального призначення.

Атрибути тегу \<NC>:

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 57%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Назва</td>
<td>Коментар</td>
<td>Формат</td>
</tr>
<tr class="even">
<td>NI</td>
<td>Кількість чеків продажу</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>TC</td>
<td>Стала транспортного засобу</td>
<td>Decimal</td>
</tr>
<tr class="even">
<td>TCD</td>
<td>Дата занесення сталої транспортного засобу</td>
<td><p>String</p>
<blockquote>
<p>YYYYMMDD</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>TRN</td>
<td>Державний реєстраційний номер транспортного засобу</td>
<td>String</td>
</tr>
<tr class="even">
<td>TD</td>
<td>Загальна відстань проїзду у км</td>
<td>Decimal</td>
</tr>
<tr class="odd">
<td>PD</td>
<td>Сплачена відстань проїзду у км</td>
<td>Decimal</td>
</tr>
</tbody>
</table>

Для РРО, що друкують контрольну стрічку, атрибути TD і PD можуть не
вказуватись.

Атрибути тегу \<TRB>:

|       |                                              |         |
|-------|----------------------------------------------|---------|
| Назва | Коментар                                     | Формат  |
| BN    | Назва тарифного блоку                        | String  |
| C     | Код тарифу                                   | Decimal |
| NM    | Назва тарифу                                 | String  |
| PRC   | Вартість тарифу (у копійках)                 | Decimal |
| TX    | Податкова ставка, до якого відноситься тариф | Decimal |

У випадку, якщо в тарифному блоку були використані більше одного тарифу,
тег \<TRB> містить підтеги \<TR> з указанням атрибутів C, NM, PRC та TX
для кожного тарифу.

# Приклади 

Чек.

\<DAT FN="4538765845" TN="ПН 345612052809" ZN="АА57506761" DI="238"
DT=”3” V="1">

\<C T="0">  
\<P N="1" C="2" NM="ОПЛАТА ВІДСТАНІ" SM="71" Q=”0.357” PRC=”200”
TX="1"/>

\<P N="2" C="1" NM="ОПЛАТА ЧАСУ" SM="4" Q=”0.0019” QT=”000007”
PRC=”2000” TX="1"/>

\<P N="3" C="13" NM="ОПЛАТА СТОЯНКИ" SM="17" Q=”0.0336” QT=”000201”
PRC=”500” TX="1"/>

\<P N="4" C="4" NM="ПОЧ.ОПЛАТА" SM="1000" TX="1"/>

\<P N="5" C="5" NM="ПОСЛУГА №1" SM="300" TX="1"/>

\<D N=”6” TR=”1” TY=”1” ST=”1392” TX=”1” PR=”2.00” SM=”28”>

\<NI NI=”1”/>

\<NI NI=”2”/>

\<NI NI=”3”/>

\<NI NI=”4”/>

\<NI NI=”5”/>

\</D>

\<D N=”7” TR=”1” TY=”1” ST=”1392” TX=”1” PR=”5.00” SM=”70”>

\<NI NI=”1”/>

\<NI NI=”2”/>

\<NI NI=”3”/>

\<NI NI=”4”/>

\<NI NI=”5”/>

\</D>

\<M N="8" T="2" NM="КАРТКА" SM="294"/>

\<M N="9" T="0" NM="ГОТІВКА" SM="2000" RM=”1000”/>

\<E N="10" NO="1" TRN=”AA 1251 BC” SM="1294" SE="1078" FN="4538765845"
TS="20110801112601" TX="1" TXPR="20.00" TXSM="216" DTPR="0.00" DTSM="0"
TXTY="0" TXAL="0" CS="1"/>  
\</C>

\<TS>20121002103216\</TS>

\</DAT>

Z-звіт.

\<DAT FN="1234567890" TN="ПН 345612052809" ZN="АА57506761" DI="415"
DT=”1” V="1">

\<Z NO="275">  
\<TXS TX="1" TS="20121002" TXPR="20.00" TXI="216" TXO="0" DTPR="0.00"
DTI="0" DTO="0" TXTY="0" TXAL="0" SMI="1294" SMO="0"/>  
\<M NM="ГОТІВКА" SMI="1000" SMO="0"/>

\<M NM="КАРТКА" SMI="294" SMO="0"/>  
\<NC NI="18" TC=”4000” TCD=”20121002” TRN=”AA 1251 BC” TD=”0.357”
PD=”0.357”/>

\<TRB BN=”ТАРИФНИЙ БЛОК А-1”>

\<TR C=”1” NM=”ТАРИФ ЧАСУ” PRC=”2000” TX=”1”/>

\<TR C=”2” NM=”ТАРИФ ВІДСТАНІ” PRC=”200” TX=”1”/>

\<TR C=”13” NM=”ТАРИФ СТОЯНКИ” PRC=”500” TX=”1”/>

\</TRB>

\</Z>  
\<TS>20121002103243\</TS>

\</DAT>

# Додаток Г. Приклад оформлення акцизу на продаж товарів

Чек продажу:

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="53" DT="1" FN="0000000001" TN="ПН 000000000002" V="1"
ZN="LV00000113">

\<C T="0">

\<P C="1" N="1" NM="Товар 1" PRC="10000" Q="1000" SM="10000"
TX="1">\</P>

\<P C="2" N="2" NM="Товар 2" PRC="20000" Q="2000" SM="40000"
TX="2">\</P>

\<P C="5" N="3" NM="Товар 5" PRC="99900" Q="5000" SM="499500"
TX="0">\</P>

\<M N="4" NM="ГОТІВКА" RM="18390" SM="567890" T="0">\</M>

\<E CS="1" FN="0000000001" N="5" NO="12" SM="549500"
TS="20150313111740">

\<TX DTPR="5.00" DTSM="23786" TX="0" TXAL="2" TXPR="0.00" TXSM="0"
TXTY="0">\</TX>

\<TX DTPR="5.00" DTSM="476" TX="1" TXAL="2" TXPR="20.00" TXSM="1587"
TXTY="0">\</TX>

\<TX DTPR="5.00" DTSM="1905" TX="2" TXAL="2" TXPR="15.00" TXSM="4969"
TXTY="0">\</TX>

\</E>\</C>\<TS>20150313111740\</TS>\</DAT>

\<MAC DI="53"
NT="2466">ABoAAAMmAAAAAAUAAAfPAAAJogE3KwAADcV8uu0=\</MAC>\</RQ>

<u>Z-звіт:</u>

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="54" DT="1" FN="0000000001" TN="ПН 000000000002" V="1"
ZN="LV00000113">

\<Z NO="7">

\<TXS DTI="23786" DTPR="5.00" SMI="499500" TS="20150313" TX="0" TXAL="2"
TXPR="0.00" TXTY="0">\</TXS>

\<TXS DTI="476" DTPR="5.00" SMI="10000" TS="20150313" TX="1" TXAL="2"
TXI="1587" TXPR="20.00" TXTY="0">\</TXS>

\<TXS DTI="1905" DTPR="5.00" SMI="40000" TS="20150313" TX="2" TXAL="2"
TXI="4969" TXPR="15.00" TXTY="0">\</TXS>

\<M NM="ГОТІВКА" SMI="549500" T="0">\</M>

\<NC NI="1" NO="0">\</NC>\</Z> \<TS>20150313111749\</TS>\</DAT>

\<MAC DI="54"
NT="2467">ABoAAAIaAAAAAAUAAAfPAAAJowE3KwAADRLImVM=\</MAC>\</RQ>

# Додаток Д. Приклад оформлення акцизу на продаж алкоголя та нафтопродуктів

<u>Чек продажу:</u>

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="53" DT="1" FN="0000000001" TN="ПН 000000000002" V="1"
ZN="L0000012">

\<C T="0">

\<PP C="1" N="1" NM="ПАЛЬНЕ 1" PRC="10000" PRK="1" PV="0" Q="1000"
SM="10000" TX="1">\</PP>

\<P C="2" N="2" NM="Товар 2" PRC="20000" Q="2000" SM="40000"
TX="2">\</P>

\<P C="5" N="3" NM="Товар 5" PRC="99900" Q="5000" SM="499500"
TX="0">\</P>

\<M N="4" NM="ГОТІВКА" RM="18390" SM="567890" T="0">\</M>

\<E CS="1" FN="0000000001" N="5" NO="12" SM="549500"
TS="20160418111740">

\<TX DTPR="0" DTSM="0" TX="0" TXPR="0.00" TXSM="0" TXTY="0">\</TX>

\<TX DTPR="0" DTSM="105" TX="1" TXAL="3" TXPR="20.00" TXSM="1649"
TXTY="0">\</TX>

\<TX DTPR="0" DTSM="0" TX="2" TXPR="15.00" TXSM="5217" TXTY="0">\</TX>

\</E>

\</C>

\<TS>20150313111740\</TS>

\</DAT>

\<MAC DI="53"
NT="2466">ABoAAAMmAAAAAAUAAAfPAAAJogE3KwAADcV8uu0=\</MAC>\</RQ>

де TX="1" - група з продажу палива,

для неї:

DTPR = 0, т.к. акциз задається абсолютним значенням в грн. на 1 л.

Значення 0 є ознакою акциза на паливо

DTSM = СТАВКА АКЦИЗА \* Q = 1,05 \* 1 (сума акциза)

TXSM = (SM - DTSM) \* TXPR/(TXPR+100) = 1649

Інші групи – продаж товарів

СТАВКА АКЦИЗА - фіксується ДФС в грн. на певну дату.

Розраховується ДФС як 0,042 \* 25.12 = 1,05 (0,042 - ставка акциза в
ЕВРО, 25.12 - курс евро на початок квартала). Власники РРО самостійно її
не розраховують.

<u>Приклад Z-звіту:</u>

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="54" DT="1" FN="0000000001" TN="ПН 000000000002" V="1"
ZN="LV00000113">

\<Z NO="7">

\<TXS DTI="0" DTPR="0" SMI="499500" TS="20150313" TX="0" TXPR="0.00"
TXTY="0">\</TXS>

\<TXS DTI="105" DTPR="0" SMI="10000" TS="20150313" TX="1" TXAL="3"
TXI="1649" TXPR="20.00" TXTY="0">\</TXS>

\<TXS DTI="0" DTPR="0" SMI="40000" TS="20150313" TX="2" TXI="5217"
TXPR="15.00" TXTY="0">\</TXS>

\<M NM="ГОТІВКА" SMI="549500" T="0">\</M>

\<NC NI="1" NO="0">\</NC>

\</Z>

\<TS>20150313111749\</TS>

\</DAT>

\<MAC DI="54"
NT="2467">ABoAAAIaAAAAAAUAAAfPAAAJowE3KwAADRLImVM=\</MAC>\</RQ>

# Додаток Е. Приклад оформлення переведення коштів за допомогою ПТКС

Чек:

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="6" DT="0" FN="id22222222" TN="ПН 444444444444" V="1"
ZN="КС3001013363">

\<C T="4">

\<P C="1" N="1" NM="ПЕРЕКАЗ" OA="Вася Пупкин" OB="111111111111"
OC="22222222222" OD="Национальный банк Украины"
OE="3333333333333333333333333333333333" OG="Рога и копыта" OH="Сплата
грошового зобов\`язання" OI="Бакай I. Ї." OJ="702189118289"
OK="0759410915108087" OL="Наказ №6775542" SM="393050" TX="1">\</P>

\<P C="0" N="2" NM="КОМIСIЯ" SM="6660" TX="1">\</P>

\<M N="3" PSNM="Простир" RRN="12121212121212121212" SM="399710"
T="1">\</M>

\<E DTPR="0.00" DTSM="0" FN="id22222222" N="4" NO="2" SM="399710"
TS="20160714155804" TX="1" TXPR="20.00" TXSM="66618" TXTY="0">\</E>

\<PTKS N="5" PNR="533882698" PT="м.Нiкополь, вул.Конєва, 92"
PU="417298369" PV="AVMRPRVZ"
PW="184098655">\</PTKS>\</C>\<TS>20160714155804\</TS>\</DAT>

\<MAC DI="6"
NT="6">ABoAAAIaAAAAAAUAAAfPAAAJowE3KwAADRLImVM=\</MAC>\</RQ>

Z-звіт:

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="10" DT="0" FN="id22222222" TN="ПН 444444444444" V="1"
ZN="КС3001013363">

\<Z NO="2">

\<TXS SMI="0" SMO="0" TX="0">\</TXS>

\<TXS SMI="1472177" TS="20160701" TX="1" TXI="245363" TXPR="20.00"
TXTY="0">\</TXS>

\<TXS TX="-1" TXPR="0.00" TXTY="0">\</TXS>

\<M SMI="721531" T="0">\</M>

\<M SMI="399710" T="1">\</M>

\<M SMI="350936" T="2">\</M>

\<NC NI="4" NO="0">\</NC>

\<OP QP="4" QS="60027">\</OP>\</Z>\<TS>20160714163141\</TS>\</DAT>

\<MAC DI="53"
NT="2466">ABoAAAMmAAAAAAUAAAfPAAAJogE3KwAADcV8uu0=\</MAC>\</RQ>

# Додаток Є. Приклад оформлення переведення коштів в РРО 

Чек приймання грошей для переказу

\<DAT DI="50" DT="3" FN="5555555555" TN="ПН 77777777777" V="1" ZN="ВК3001034072">

\<C T="4">

\<P C="1" N="1" NM="ПЕРЕКАЗ" OA="МеленковК.В." OB="423456987" OH="переказ
власних коштiв" OI="Меленкова В.А." OJ="774635422" SM="450000" TX="0"/P>

> \<P C="0" N="2" NM="КОМIСIЯ" SM="0" TX="0"/P>
>
> \<M N="3" SM="450000" T="0"/M>
>
> \<E DTPR="0.00" DTSM="0" FN="5555555555" N="4" NO="40" SM="450000" TS="20190524102834" TX="0"/E>

\</C>

\<TS>20190524102834\</TS>

\</DAT>

\<MAC DI="50" NT="82">ABoAAAHaAAAAAAEAAAABAAAAUgABHY/HWKv3nW0=\</MAC>

Чек видачі грошей при переказі

\<DAT DI="58" DT="3" FN="5555555555" TN="ПН 777777777777" V="1" ZN="ВК3001034072">

\<C T="7">

> \<P C="1" N="1" NM="ПЕРЕКАЗ" OA="Иван" OB="234524523452" OH="За
> поплавки" OI="Василь" OJ="316546216" SM="34000" TX="0"/P>
>
> \<P C="0" N="2" NM="КОМIСIЯ" SM="0" TX="0"/P>
>
> \<M N="3" SM="34000" T="0"/M>
>
> \<E DTPR="0.00" DTSM="0" FN="5555555555" N="4" NO="45" SM="34000" TS="20190625103249" TX="0"/E>

\</C>

\<TS>20190625103249\</TS>

\</DAT>

\<MAC DI="58" NT="90">ABoAAAG+AAAAAAEAAAABAAAAWgABHY/HWIQGubI=\</MAC>

Z-звіт

\<DAT DI="51" DT="3" FN="5555555555" TN="ПН777777777777" V="1" ZN="ВК3001034072">

\<Z NO="7">

> \<VL C="840" GA="0" GP="0" KP="0027.28000000" KR="0028.00000000" KS="0028.45000000" N="1" NC="USD" NI="1422500" NIS="0"NM="Долар США " NO="272800" NOS="0" SC="0" SCS="0" SI="0" VI="10000" VIC="0" VIN="250000" VIS="0" VO="50000" VOC="0"VON="10000" VOS="0" VSI="0" VSIN="0" VSO="0" VSON="0"/VL>

\<TXS TS="20190524" DTI="28450" DTIS="0" DTNM="збiр " DTO="0" DTOS="0" DTPR="2.00"/TXS>

\<NIO TGA="0" TGP="0" TIN="0" TKA="450000" TLP="34000" TMN="0" TNI="15" TNK="2"/NIO>

\</Z>

\<TS>20190524102852\</TS>

\</DAT>

# Додаток Ж. Приклад оформлення видачі готівкових коштів держателям електронних платіжних засобів. 

\<DAT DI="58" DT="0" FN="5555555555" TN="ПН 777777777777" V="1" ZN="NВ3001034072">

\<C T="7">

> \<P C="980" N="1" NM="ГРИВНА" SM="1000" TX="0"/P>
>
> \<M N="2" SM="1000" T="1"/M>
>
> \<E DTPR="0.00" DTSM="0" FN="5555555555" N="3" NO="1" SM="1000" TS="20190625103249" TX="0"/E>

\</C>

\<TS>20190625103249\</TS>

\</DAT>

\<MAC DI="58" NT="90">ABoAAAG+AAAAAAEAAAABAAAAWgABHY/HWIQGubI=\</MAC>

\<?xml version="1.0" encoding="windows-1251"?>

\<RQ V="1">

\<DAT DI="70" DT="0" FN="5555555555" TN="ПН 777777777777" V="1"
ZN="NВ3001034072">

\<Z NO="2">

\<TXS SMI="1472177" SMO="1000" TS="20160701" TX="0" TXI="0" TXO="0"
TXPR="0.00" TXTY="0">\</TXS>

\<TXS SMI="363000" TS="20160701" TX="1" TXI="22000" TXO="0" TXPR="20.00"
TXTY="0">\</TXS>

\<M SMI="721531" T="0">\</M>

\<M SMI="399710" T="1">\</M>

\<NC NI="4" NO="1">\</NC>

\</Z>\<TS>20190625103249\</TS>\</DAT>

\<MAC DI="70"
NT="146">ABoAAAMmAAAAAAUAAAfPAAAJogE3KwAADcV8uu0=\</MAC>\</RQ>

# Додаток В. Коди помилок отримання пакетів даних

<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 55%" />
<col style="width: 32%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Код</p>
<p>помилки</p></td>
<td>Опис помилки</td>
<td>Коментар</td>
</tr>
<tr class="even">
<td>100-199</td>
<td>Повторити передачу (до п’яти разів)</td>
<td></td>
</tr>
<tr class="odd">
<td>200</td>
<td>Персоналізація не дозволена</td>
<td></td>
</tr>
<tr class="even">
<td>201-299</td>
<td>Повторна передача не потрібна</td>
<td></td>
</tr>
<tr class="odd">
<td>300-399</td>
<td>Критична помилка, потрібне втручання спеціаліста</td>
<td></td>
</tr>
<tr class="even">
<td>201</td>
<td>Помилка прийому даних на ДПС: невірний MAC</td>
<td></td>
</tr>
<tr class="odd">
<td>202</td>
<td>Помилка прийому даних на ДПС: невірний формат данних XML</td>
<td></td>
</tr>
<tr class="even">
<td>400</td>
<td>Помилка персоналізації (невірний формат запиту персоналізації).</td>
<td></td>
</tr>
</tbody>
</table>

Розробники:

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 45%" />
<col style="width: 19%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr class="odd">
<td>№</td>
<td>Посада</td>
<td>Підпис</td>
<td>Прізвище та ініціали</td>
</tr>
<tr class="even">
<td><ol type="1">
<li></li>
</ol></td>
<td>Головний інженер відділу технічного супроводження учасників платіжної системи Національного банку України</td>
<td></td>
<td>О.Ю. Ващенко</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Погоджено від НБУ:

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 47%" />
<col style="width: 20%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr class="odd">
<td>№</td>
<td>Посада</td>
<td>Підпис</td>
<td>Прізвище та ініціали</td>
</tr>
<tr class="even">
<td><ol type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="2" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><ol start="3" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="4" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><ol start="5" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Погоджено від ДПС:

<table style="width:100%;">
<colgroup>
<col style="width: 6%" />
<col style="width: 47%" />
<col style="width: 20%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr class="odd">
<td>№</td>
<td>Посада</td>
<td>Підпис</td>
<td>Прізвище та ініціали</td>
</tr>
<tr class="even">
<td><ol type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="2" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><ol start="3" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="4" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><ol start="5" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><ol start="6" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><ol start="7" type="1">
<li></li>
</ol></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
